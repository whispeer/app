{"version":3,"sources":["../../src/pages/new-message/new-message.module.ts","../../src/components/components.module.ts","../../src/lib/pipes/responsiveDate.ts","../../src/lib/pipes/maxValue.ts","../../src/lib/pipes/filenameLimit.ts","../../src/components/userImage.ts","../../src/components/navigator/navigator.ts","../../src/components/load.ts","../../src/assets/images/icons ^/.//.*/.svg$","../../src/assets/images/icons/add.svg","../../src/assets/images/icons/added.svg","../../src/assets/images/icons/deny.svg","../../src/assets/images/icons/write.svg","../../src/components/loadingProgress.ts","../../src/components/hexagon.ts","../../src/components/navigator/hexagon.ts","../../src/components/navigator/icon.ts","../../src/lib/asset/memoizer.ts","../../src/lib/services/fileUpload.service.ts","../../src/lib/contacts/contactsWithSearch.ts","../../src/lib/services/imageUpload.service.ts","../../src/lib/services/screenSize.service.ts","../../node_modules/blueimp-load-image/js/load-image.js","../../src/lib/asset/voicemailPlayer.ts","../../src/components/topic/topicComponentsModule.ts","../../src/lib/pipes/seperatorDate.ts","../../src/components/topic/topicDisplay.ts","../../node_modules/typestate/dist/typestate-node.js","../../node_modules/uuid/v4.js","../../node_modules/uuid/lib/rng-browser.js","../../node_modules/uuid/lib/bytesToUuid.js","../../src/components/topic/burstDifference.ts","../../src/components/topic/message.ts","../../src/components/syntaxify.ts","../../src/components/gallery/gallery.ts","../../src/pages/new-message/new-message.ts"],"names":[],"mappings":"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,CAAC;IACrD,CAAC;IAAA,CAAC;IAoKH,kBAAC;AAAD,CAAC,CAjRyB,oEAAU,GAiRnC;AAED,yDAAe,WAAW;;;;;;;;;;;;;;;;;;;;AC5Xe;AAEzC;IAAgC,qCAAQ;IAAxC;;IAEA,CAAC;IAAD,wBAAC;AAAD,CAAC,CAF+B,wDAAQ,GAEvC;AAED,yDAAe,IAAI,iBAAiB,EAAE,EAAC;;;;;;;;ACNvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AAAA;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,CAAC;;;;;;;;;;;;AC7WwD;AACrB;AAUpC,IAAM,KAAK,GAAG,IAAI,kEAAK,EAAE;AAEzB;IAWC,yBAAY,UAA0B;QAAtC,iBAEC;QAVO,YAAO,GAAG,KAAK;QACf,eAAU,GAAmB,EAAE;QAE/B,uBAAkB,GAAG,CAAC;QACtB,aAAQ,GAAG,CAAC;QACZ,aAAQ,GAAY,IAAI;QACxB,oBAAe,GAAqB,EAAE;QA0E9C,iBAAY,GAAG;YACd,MAAM,CAAC,6CAAY,CAAC,KAAI,CAAC,eAAe,CAAC;QAC1C,CAAC;QAkDO,mBAAc,GAAG,UAAC,MAAM;YAC/B,EAAE,CAAC,CAAC,MAAM,KAAK,KAAK,CAAC,aAAa,IAAI,KAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;gBACxD,+EAA+E;gBAC/E,iDAAgB,EAAE,CAAC,IAAI,CAAC;oBACvB,KAAI,CAAC,kBAAkB,IAAI,CAAC;oBAC5B,KAAI,CAAC,QAAQ,GAAG,CAAC;oBAEjB,EAAE,CAAC,CAAC,KAAI,CAAC,kBAAkB,IAAI,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;wBACvD,KAAI,CAAC,KAAK,EAAE;wBACZ,MAAM;oBACP,CAAC;oBAED,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE;gBAC1D,CAAC,CAAC;YACH,CAAC;QACF,CAAC;QA1IA,IAAI,CAAC,UAAU,GAAG,UAAU;IAC7B,CAAC;IAED,8BAAI,GAAJ;QAAA,iBAoBC;QAnBA,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC;YACxB,EAAE,CAAC,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,CAAC;gBAClC,eAAe,CAAC,YAAY,CAAC,KAAK,EAAE;YACrC,CAAC;YACD,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAAC,IAAI,EAAE;YACzD,eAAe,CAAC,YAAY,GAAG,KAAI;YACnC,KAAI,CAAC,OAAO,GAAG,IAAI;YAEnB,aAAa,CAAC,KAAI,CAAC,QAAQ,CAAC;YAC5B,KAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,WAAW,CAAC;gBAClC,IAAM,iBAAiB,GAAG,KAAI,CAAC,kBAAkB;gBACjD,KAAI,CAAC,UAAU,CAAC,KAAI,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC,IAAI,CAAC,UAAC,GAAW;oBACxF,EAAE,CAAC,CAAC,iBAAiB,KAAK,KAAI,CAAC,kBAAkB,IAAI,KAAI,CAAC,QAAQ,KAAK,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC3F,KAAI,CAAC,QAAQ,GAAG,GAAG;oBACpB,CAAC;gBACF,CAAC,CAAC;YACH,CAAC,EAAE,GAAG,CAAC;QAER,CAAC,CAAC;IACH,CAAC;IAED,+BAAK,GAAL;QACC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE;QAC1D,eAAe,CAAC,YAAY,GAAG,IAAI;QACnC,IAAI,CAAC,OAAO,GAAG,KAAK;IACrB,CAAC;IAED,gCAAM,GAAN;QACC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,KAAK,EAAE;QACb,CAAC;QAAC,IAAI,CAAC,CAAC;YACP,IAAI,CAAC,IAAI,EAAE;QACZ,CAAC;IACF,CAAC;IAED,mCAAS,GAAT;QACC,MAAM,CAAC,IAAI,CAAC,OAAO;IACpB,CAAC;IAED,kCAAQ,GAAR;QACC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO;IACrB,CAAC;IAED,qCAAW,GAAX,UAAY,WAAoB;QAC/B,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,MAAM,CAAC,UAAC,IAAI,EAAE,IAAI,IAAK,WAAI,GAAG,IAAI,CAAC,QAAQ,EAApB,CAAoB,EAAE,CAAC,CAAC;IAC7F,CAAC;IAED,qCAAW,GAAX;QACC,IAAM,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC;QACjE,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ;IACvC,CAAC;IAED,+BAAK,GAAL;QACC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC;QAE5B,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,UAAC,EAAa;gBAAX,wBAAS;YAAO,gBAAS,CAAC,IAAI,EAAE;QAAhB,CAAgB,CAAC;QAC5D,IAAI,CAAC,kBAAkB,GAAG,CAAC;QAC3B,IAAI,CAAC,QAAQ,GAAG,CAAC;QACjB,IAAI,CAAC,QAAQ,GAAG,IAAI;QAEpB,EAAE,CAAC,CAAC,eAAe,CAAC,YAAY,IAAI,IAAI,KAAK,eAAe,CAAC,YAAY,CAAC,CAAC,CAAC;YAC3E,eAAe,CAAC,YAAY,CAAC,KAAK,EAAE;QACrC,CAAC;QACD,eAAe,CAAC,YAAY,GAAG,IAAI;QACnC,IAAI,CAAC,OAAO,GAAG,KAAK;IACrB,CAAC;IAMD,sCAAY,GAAZ,UAAa,IAAY,EAAE,iBAAyB;QAApD,iBAiCC;QAhCA,IAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,KAAK,KAAK;QAE9C,IAAM,gBAAgB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC;QAEpF,gBAAgB,CAAC,IAAI,EAAE;QAEvB,IAAM,aAAa,GAAG;YACrB,IAAI;YACJ,SAAS,EAAE,gBAAgB;YAC3B,QAAQ,EAAE,iBAAiB;SAC3B;QAED,IAAM,cAAc,GAAG,IAAI,sCAAQ,CAAC,UAAC,OAAO;YAC3C,IAAM,YAAY,GAAG,gBAAgB,CAAC,cAAc,CAAC,SAAS,CAAC,UAAC,CAAC;gBAChE,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;oBAC/B,gBAAgB,CAAC,IAAI,EAAE;gBACxB,CAAC;gBAED,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC;oBAC/B,YAAY,CAAC,WAAW,EAAE;oBAC1B,OAAO,EAAE;gBACV,CAAC;YACF,CAAC,CAAC;QACH,CAAC,CAAC,CAAC,IAAI,CAAC;YACP,aAAa,CAAC,QAAQ,GAAG,gBAAgB,CAAC,WAAW,EAAE;YAEvD,gBAAgB,CAAC,cAAc,CAAC,SAAS,CAAC,KAAI,CAAC,cAAc,CAAC;QAC/D,CAAC,CAAC;QAEF,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,cAAc,CAAC;QAEzC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC;IACpC,CAAC;IAED,iCAAO,GAAP;QACC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,UAAC,EAAmB;gBAAjB,wBAAS,EAAE,cAAI;YACzC,SAAS,CAAC,OAAO,EAAE;YAEnB,4BAA4B;YAC5B,OAAO,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC;QACzC,CAAC,CAAC;IACH,CAAC;IAED,uCAAa,GAAb;QACC,MAAM,CAAK,IAAI,CAAC,UAAU,SAAC;IAC5B,CAAC;IAnIc,4BAAY,GAAoB,IAAI;IAqJpD,sBAAC;CAAA;yDAvJoB,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbK;AACM;AACH;AAEsB;AAEnB;AACa;AAChB;AAEK;AAEI;AAEE;AAED;AA4BtD;IAAA;IAAqC,CAAC;IAAzB,qBAAqB;QA1BjC,uEAAQ,CAAC;YACT,YAAY,EAAE;gBACb,mFAAiB;gBACjB,qEAAc;gBACd,kFAAwB;gBACxB,sEAAkB;gBAClB,0EAAgB;gBAChB,kEAAgB;aAChB;YACD,OAAO,EAAE;gBACR,4EAAgB;gBAChB,kEAAW;gBACX,qEAAY;gBACZ,6EAAe,CAAC,QAAQ,EAAE;aAC1B;YACD,OAAO,EAAE;gBACR,mFAAiB;gBACjB,qEAAc;gBACd,kFAAwB;gBACxB,sEAAkB;gBAClB,0EAAgB;gBAChB,kEAAgB;gBAEhB,qEAAY;aACZ;SACD,CAAC;OACW,qBAAqB,CAAI;IAAD,4BAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;AC5CG;AACT;AAC2B;AAEvD,IAAM,aAAa,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC;AAK5C;IAEC,2BAAoB,SAA2B;QAA3B,cAAS,GAAT,SAAS,CAAkB;IAAG,CAAC;IAEnD,qCAAS,GAAT,UAAU,KAAU;QACnB,EAAE,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACX,MAAM,CAAC,EAAE,CAAC;QACX,CAAC;QAED,EAAE,EAAC,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC;YAC9B,KAAK,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;QACzB,CAAC;QAED,IAAM,WAAW,GAAG,8CAAM,CAAC,KAAK,CAAC;QAEjC,IAAM,SAAS,GAAG,WAAW,CAAC,MAAM,CAAC,cAAc,CAAC;QAEpD,IAAM,OAAO,GAAG,8CAAM,EAAE,CAAC,IAAI,CAAC,WAAW,EAAE,MAAM,CAAC;QAElD,EAAE,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;YACjB,MAAM,CAAC,KAAG,SAAW;QACtB,CAAC;QAED,IAAM,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAQ,aAAa,CAAC,OAAO,CAAG,CAAC,CAAC;QAE/E,MAAM,CAAI,aAAa,UAAK,SAAW;IACxC,CAAC;IA1BW,iBAAiB;QAH7B,mEAAI,CAAC;YACL,IAAI,EAAE,eAAe;SACrB,CAAC;yCAG8B,6EAAgB;OAFnC,iBAAiB,CA2B7B;IAAD,wBAAC;CAAA;AA3B6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACT8E,CAAC,yCAAyC;AAC9F;AACT;AAE+B;AAE1C;AAEoB;AACJ;AACQ;AAEN;AAEU;AACF;AAEvB;AACF;AAET;AAEoD;AAEzB;AAEO;AAEU;AAExE,IAAK,eAIJ;AAJD,WAAK,eAAe;IACnB,qEAAY;IACZ,+DAAS;IACT,yDAAM;AACP,CAAC,EAJI,eAAe,KAAf,eAAe,QAInB;AAED,IAAI,qBAAqB,GAAG,IAAI,qDAAS,CAAC,kBAAkB,CAAkB,eAAe,CAAC,YAAY,CAAC;AAE3G,qBAAqB,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC;AAC5E,qBAAqB,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,eAAe,CAAC,YAAY,CAAC;AAE/E,qBAAqB,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC;AAEhF,IAAM,kBAAkB,GAAG;IAC1B,KAAK,EAAE,IAAI;IACX,MAAM,EAAE,IAAI;IACZ,kBAAkB,EAAE,CAAC;CACrB;AAED,IAAM,4BAA4B,GAAG,IAAI;AAEzC,IAAM,oBAAoB,GAAG,kGAAiB,EAAE,GAAG,EAAE,GAAG,EAAE;AAE1D,IAAM,KAAK,GAAG,cAAM,aAAM,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,QAAQ,KAAK,KAAK,EAAjD,CAAiD;AAErE,IAAM,aAAa,GAAG;IACrB,WAAI,sCAAQ,CAAS,UAAC,OAAO,EAAE,MAAM,IAAK,aAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,aAAa,CAAC,EAA1D,CAA0D,CAAC;SACnG,IAAI,CAAC,UAAC,GAAG,IAAK,mBAAU,GAAK,EAAf,CAAe,CAAC;AADhC,CACgC;AAEjC,IAAM,iBAAiB,GAAG;IACzB,WAAI,sCAAQ,CAAS,UAAC,OAAO,EAAE,MAAM,IAAK,aAAM,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,EAAxC,CAAwC,CAAC;SACjF,IAAI,CAAC,UAAC,GAAG,IAAK,mBAAU,GAAK,EAAf,CAAe,CAAC;AADhC,CACgC;AAEjC,IAAM,UAAU,GAAG,cAAM,YAAK,EAAE,GAAG,aAAa,EAAE,GAAG,iBAAiB,EAAE,EAA/C,CAA+C;AAExE,IAAM,IAAI,GAAG,IAAI,gEAAI,EAAE;AAMvB;IAoCC,wBACQ,OAAsB,EACrB,eAAsC,EACtC,QAAkB,EAClB,WAAwB,EACxB,MAAc,EACd,SAA2B,EAC3B,KAAY,EACZ,eAAgC;QARzC,iBAmCC;QAlCO,YAAO,GAAP,OAAO,CAAe;QACrB,oBAAe,GAAf,eAAe,CAAuB;QACtC,aAAQ,GAAR,QAAQ,CAAU;QAClB,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAQ;QACd,cAAS,GAAT,SAAS,CAAkB;QAC3B,UAAK,GAAL,KAAK,CAAO;QACZ,oBAAe,GAAf,eAAe,CAAiB;QArC/B,gBAAW,GAAG,IAAI,mEAAY,EAAE;QAS1C,gBAAW,GAAY,IAAI;QAC3B,mBAAc,GAAG,EAAE;QACnB,0BAAqB,GAAG,IAAI;QAC5B,mBAAc,GAAU,EAAE;QAC1B,wBAAmB,GAAW,CAAC;QAC/B,eAAU,GAAY,KAAK;QAQnB,kBAAa,GAAG;YACvB,IAAI,EAAE,EAAE;YACR,QAAQ,EAAE,CAAC;YACX,SAAS,EAAE,CAAC;YACZ,cAAc,EAAE,CAAC;SACjB;QAsDD,qBAAgB,GAAG,UAAC,SAAS;YAC5B,IAAM,EAAE,GAAG,KAAI,CAAC,uBAAuB,EAAE;YAEzC,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,KAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC,CAAC,CAAC;gBAC1C,MAAM,CAAC,KAAI,CAAC,eAAe,EAAE;YAC9B,CAAC;YAED,IAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAoB,EAAE,QAAI,CAAC;YAEvE,IAAM,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,UAAC,QAAQ;gBAC5C,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,OAAO;oBACtD,IAAM,QAAQ,GAAG,YAAY,CAAC,uBAAuB,CAAC,OAAO,CAAC;oBAE9D,MAAM,CAAC,QAAQ,GAAG,IAAI;gBACvB,CAAC,CAAC;YACH,CAAC,CAAC;YAEF,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBAClB,MAAM,CAAC,KAAI,CAAC,eAAe,EAAE;YAC9B,CAAC;YAED,OAAO,CAAC,IAAI,CAAC,wEAAwE,CAAC;QACvF,CAAC;QAED,mBAAc,GAAG;YAChB,KAAI,CAAC,eAAe,EAAE;QACvB,CAAC;QAEO,kBAAa,GAAG;YACvB,IAAM,UAAU,GAAG,KAAI,CAAC,eAAe,CAAC,aAAa,EAAE;YAEvD,KAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,UAAC,EAA2C;oBAAzC,cAAI,EAAE,wBAAS,EAAE,sBAAQ;gBACpF,iGAAkC,EAAhC,wBAAS,EAAE,cAAI,CAAiB;gBAExC,MAAM,CAAC,IAAI,CAAC,QAAQ,CACnB,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,SAAS,GAAG,SAAS,GAAG,SAAS,EAC3D,IAAI,EACJ,IAAI,CAAC,cAAc,EACnB,IAAI,CACJ,CAAC,IAAI,CAAC,cAAM,QAAC;oBACb,IAAI,EAAE,KAAG,IAAI,CAAC,cAAc,GAAG,IAAM;oBACrC,QAAQ,YAAE,SAAS;iBACnB,CAAC,EAHW,CAGX,CAAC;YACJ,CAAC,CAAC,CAAC,GAAG,CAAC,UAAC,SAAuB;gBACtB,yBAAI,EAAE,6BAAQ,CAAc;gBAEpC,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,UAAU;oBACzC,WAAI,iFAAU,CAAC,UAAU,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,QAAQ,YAAE,EAAE,CAAC;gBAAtE,CAAsE,CACtE;YACF,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,UAAU;gBAClB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC;oBACrB,IAAI,EAAE,EAAE;oBACR,UAAU;iBACV,CAAC;YACH,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC;gBACV,OAAO,CAAC,KAAK,CAAC,0BAA0B,EAAE,CAAC,CAAC;gBAC5C,OAAO;YACR,CAAC,CAAC;YAEF,KAAI,CAAC,mBAAmB,EAAE;QAC3B,CAAC;QAED,sBAAiB,GAAG;YACnB,EAAE,CAAC,CAAC,KAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC;gBACjC,EAAE,CAAC,CAAC,KAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;oBACxB,KAAI,CAAC,eAAe,EAAE;gBACvB,CAAC;gBAED,KAAI,CAAC,aAAa,EAAE;gBAEpB,MAAM;YACP,CAAC;YAED,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC;gBACrB,IAAI,EAAE,KAAI,CAAC,cAAc;aACzB,CAAC;YAEF,KAAI,CAAC,cAAc,GAAG,EAAE;YAExB,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,KAAK,EAAE;YAE1C,KAAI,CAAC,MAAM,EAAE;QACd,CAAC;QAmBD,YAAO,GAAG,UAAC,GAAW,EAAE,IAAa;YACpC,MAAM,CAAC,iDAAgB,CAAC,IAAI,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC;iBAC1D,IAAI,CAAC,UAAC,IAAe,IAAK,WAAI,sCAAQ,CAAC,UAAC,OAAO,EAAE,MAAM,IAAK,WAAI,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,EAA1B,CAA0B,CAAC,EAA7D,CAA6D,CAAC;iBACxF,IAAI,CAAC,UAAC,IAAS;gBACf,IAAI,CAAC,WAAW,GAAG,GAAG;gBACtB,EAAE,EAAC,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;oBAC5B,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,SAAS,EAAE,YAAU,MAAM,CAAC,QAAQ,CAAC,IAAM,CAAC;gBACzE,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,GAAG,oBAAoB,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC;oBACpD,KAAI,CAAC,qBAAqB,EAAE;oBAC5B,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC;gBAC9C,CAAC;gBACD,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBACV,IAAI,CAAC,IAAI,GAAG,IAAI;gBACjB,CAAC;gBAED,MAAM,CAAC,IAAI;YACZ,CAAC,CAAC;QACJ,CAAC;QAED,cAAS,GAAG;YACX,KAAI,CAAC,MAAM,CAAC,UAAU,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,UAAC,GAAQ;gBACxD,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,WAAW,CAAC;YACtC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,IAAS;gBACjB,MAAM,CAAC,IAAI,kFAAW,CAAC,IAAI,CAAC;YAC7B,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,KAAK;gBACb,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC;oBACrB,MAAM,EAAE,CAAC,KAAK,CAAC;oBACf,IAAI,EAAE,EAAE;iBACR,CAAC;YACH,CAAC,CAAC;QACH,CAAC;QAED,qBAAgB,GAAG;YAClB,YAAI,CAAC,UAAU,GAAG,CAAC,KAAI,CAAC,UAAU;QAAlC,CAAkC;QAEnC,uBAAkB,GAAG;YACpB,QAAC,KAAI,CAAC,UAAU,IAAI,KAAI,CAAC,cAAc,CAAC,MAAM,KAAK,CAAC;QAApD,CAAoD;QAErD,yBAAoB,GAAG;YACtB,QAAC,qBAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,YAAY,CAAC;QAAvD,CAAuD;QAExD,eAAU,GAAG;YACZ,4BAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,KAAI,CAAC,eAAe,CAAC,SAAS,EAAE;QAApF,CAAoF;QAErF,gBAAW,GAAG;YACb,4BAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC;QAAnD,CAAmD;QAEpD,aAAQ,GAAG;YACV,4BAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC;QAAhD,CAAgD;QAEjD,oBAAe,GAAG;YACjB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAC9B,MAAM,CAAC,IAAI,CAAC,qBAAqB;YAClC,CAAC;YAED,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC;QACpD,CAAC;QAED,yBAAoB,GAAG;YACtB,IAAM,WAAW,GAAG,KAAI,CAAC,eAAe,CAAC,aAAa,EAAE,CAAC,MAAM;YAC/D,IAAM,SAAS,GAAG,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,KAAK;YACzD,IAAM,GAAG,GAAG,KAAI,CAAC,eAAe,EAAE;YAElC,MAAM,CAAI,GAAG,kBAAa,KAAI,CAAC,aAAa,CAAC,IAAI,SAAI,WAAW,SAAI,SAAW;QAChF,CAAC;QAqBD,eAAU,GAAG,UAAC,OAAO;YACpB,IAAM,WAAW,GAAG,4DAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YACtD,IAAM,OAAO,GAAG,4DAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;YAElD,MAAM,CAAI,OAAO,SAAI,WAAa;QACnC,CAAC;QAED,uBAAkB,GAAG,UAAC,WAAoB;YACzC,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;gBACjB,MAAM,CAAC,CAAC;YACT,CAAC;YAED,EAAE,CAAC,CAAC,CAAC,qBAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBAC1D,MAAM,CAAC,CAAC;YACT,CAAC;YAED,MAAM,CAAC,KAAI,CAAC,aAAa,CAAC,QAAQ;QACnC,CAAC;QAED,gBAAW,GAAG,UAAC,WAAoB;YAClC,MAAM,CAAC,KAAI,CAAC,eAAe,CAAC,WAAW,EAAE,GAAG,KAAI,CAAC,kBAAkB,EAAE;QACtE,CAAC;QAED,oBAAe,GAAG;YACjB,EAAE,CAAC,CAAC,qBAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;gBACzD,qBAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,MAAM,CAAC;gBAChD,aAAa,CAAC,KAAI,CAAC,aAAa,CAAC,cAAc,CAAC;gBAEhD,KAAI,CAAC,aAAa,CAAC,UAAU,EAAE;gBAC/B,KAAI,CAAC,aAAa,CAAC,OAAO,EAAE;gBAC5B,KAAI,CAAC,aAAa,GAAG,IAAI;gBAEzB,KAAI,CAAC,eAAe,CAAC,YAAY,CAAC,KAAI,CAAC,oBAAoB,EAAE,EAAE,KAAI,CAAC,aAAa,CAAC,QAAQ,CAAC;gBAC3F,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,CAAC;YAChC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACP,qBAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,SAAS,CAAC;gBACnD,KAAI,CAAC,cAAc,EAAE;YACtB,CAAC;QACF,CAAC;QAED,wBAAmB,GAAG;YACrB,EAAE,CAAC,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxB,KAAI,CAAC,aAAa,CAAC,OAAO,EAAE;gBAC5B,KAAI,CAAC,aAAa,GAAG,IAAI;YAC1B,CAAC;YAED,aAAa,CAAC,KAAI,CAAC,aAAa,CAAC,cAAc,CAAC;YAEhD,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE;YAC5B,KAAI,CAAC,eAAe,GAAG,IAAI,4EAAe,CAAC,EAAE,CAAC;YAE9C,qBAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,YAAY,CAAC;QACvD,CAAC;QAED,qBAAgB,GAAG;YAClB,KAAI,CAAC,eAAe,CAAC,OAAO,EAAE;YAC9B,KAAI,CAAC,mBAAmB,EAAE;QAC3B,CAAC;QAED,gBAAW,GAAG;YACb,MAAM,CAAC,KAAI,CAAC,eAAe,CAAC,WAAW,EAAE;QAC1C,CAAC;QAED,mBAAc,GAAG;YAChB,KAAI,CAAC,eAAe,CAAC,MAAM,EAAE;QAC9B,CAAC;QAED,uBAAkB,GAAG;YACpB,IAAM,YAAY,GAAG;gBACpB,IAAI,EAAE,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,iBAAiB,CAAC;gBAC/C,IAAI,EAAE,CAAC,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,QAAQ,GAAE,IAAI;gBAC/C,OAAO,EAAE;oBACR,KAAI,CAAC,SAAS,EAAE;gBACjB,CAAC;aACD;YAED,IAAM,aAAa,GAAG;gBACrB,IAAI,EAAE,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,qBAAqB,CAAC;gBACnD,IAAI,EAAE,CAAC,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,OAAO,GAAE,IAAI;gBAC9C,OAAO,EAAE;oBACR,iDAAgB,CAAC,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC,CAAC,GAAG,CAAC,UAAC,MAAW;wBAClF,MAAM,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,EAAE,WAAW,CAAC;oBACzC,CAAC,CAAC,CAAC,GAAG,CAAC,UAAC,IAAS;wBAChB,MAAM,CAAC,IAAI,kFAAW,CAAC,IAAI,CAAC;oBAC7B,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;wBACd,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC;4BACrB,MAAM;4BACN,IAAI,EAAE,EAAE;yBACR,CAAC;oBACH,CAAC,CAAC;gBACH,CAAC;aACD;YAED,IAAM,UAAU,GAAG;gBAClB,IAAI,EAAE,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC;gBAChD,IAAI,EAAE,CAAC,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,UAAU,GAAE,IAAI;gBACjD,OAAO,EAAE;oBACR,UAAU,EAAE;yBACV,IAAI,CAAC,cAAI,IAAI,YAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAlB,CAAkB,CAAC;yBAChC,IAAI,CAAC,cAAI,IAAI,WAAI,iFAAU,CAAC,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,EAAtD,CAAsD,CAAC;yBACpE,IAAI,CAAC,cAAI;wBACT,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC;4BACrB,KAAK,EAAE,CAAC,IAAI,CAAC;4BACb,IAAI,EAAE,EAAE;yBACR,CAAC;oBACH,CAAC,CAAC;gBACJ,CAAC;aACD;YAED,IAAM,YAAY,GAAG;gBACpB,IAAI,EAAE,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,gBAAgB,CAAC;gBAC9C,IAAI,EAAE,CAAC,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,OAAO,GAAG,IAAI;gBAC/C,IAAI,EAAE,QAAQ;aACd;YAED,IAAM,OAAO,GAAG,8EAAc,CAAC,gBAAgB,CAAC,mBAAmB,CAAC;gBACnE,CAAE,YAAY,EAAE,aAAa,EAAE,UAAU,EAAE,YAAY,CAAE;gBACzD,CAAE,YAAY,EAAE,aAAa,EAAE,YAAY,CAAE;YAE9C,IAAI,WAAW,GAAG,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC7C,OAAO;aACP,CAAC;YAEF,WAAW,CAAC,OAAO,EAAE;QACtB,CAAC;QAMD,aAAQ,GAAG,UAAC,OAAO,EAAE,YAAY;YAChC,IAAM,GAAG,GAAG,OAAO,CAAC,qBAAqB,EAAE,CAAC,GAAG,GAAG,YAAY;YAE9D,MAAM,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY;QAChE,CAAC;QAED,yBAAoB,GAAG,4DAAC,CAAC,QAAQ,CAAC;YACjC,IAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,YAAY;YAEnE,IAAM,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAC1C,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,CAC9D;YAED,KAAI,CAAC,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,YAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,CAAC,EAA9B,CAA8B,CAAC;QAC7E,CAAC,EAAE,EAAE,CAAC;QAqBN,aAAQ,GAAG;YACV,KAAI,CAAC,mBAAmB,GAAG,KAAI,CAAC,gBAAgB,EAAE;YAElD,KAAI,CAAC,oBAAoB,EAAE;YAC3B,KAAI,CAAC,qBAAqB,EAAE;QAC7B,CAAC;QAED,qBAAgB,GAAG;YAClB,IAAM,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa;YAC1C,MAAM,CAAC,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC,SAAS;QAC1D,CAAC;QAED,mCAA8B,GAAG,UAAC,MAAM,EAAE,gBAAgB;YACzD,IAAM,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa;YAE1C,IAAM,SAAS,GAAG,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC;YAEhD,EAAE,CAAC,CAAC,SAAS,KAAK,MAAM,CAAC,CAAC,CAAC;gBAC1B,OAAO,CAAC,IAAI,CAAC,yBAAuB,MAAM,YAAO,SAAW,CAAC;gBAE7D,KAAI,CAAC,mBAAmB,GAAG,gBAAgB;gBAC3C,KAAI,CAAC,eAAe,EAAE;gBAEtB,MAAM,CAAC,IAAI;YACZ,CAAC;YAED,MAAM,CAAC,KAAK;QACb,CAAC;QAED,sBAAiB,GAAG,UAAC,MAAM,EAAE,gBAAgB,EAAE,WAAW;YACzD,IAAM,SAAS,GAAG,EAAE;YAEpB,+CAAc,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC;gBAC9B,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,8BAA8B,CAAC,MAAM,EAAE,gBAAgB,CAAC,IAAI,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;oBACvF,KAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,gBAAgB,EAAE,WAAW,GAAG,SAAS,CAAC;gBAC1E,CAAC;YACF,CAAC,CAAC;QACH,CAAC;QAED,oBAAe,GAAG;YACjB,IAAM,OAAO,GAAG,KAAI,CAAC,OAAO,CAAC,aAAa;YAE1C,IAAM,MAAM,GAAG,KAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC;YAC7C,IAAM,YAAY,GAAG,MAAM,GAAG,KAAI,CAAC,mBAAmB;YAEtD,OAAO,CAAC,SAAS,GAAG,YAAY;YAEhC,KAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,KAAI,CAAC,mBAAmB,EAAE,KAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;QAC7F,CAAC;QAED,4BAAuB,GAAG;YACzB,IAAM,kBAAkB,GAAG,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC;YAEjD,EAAE,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBACxB,MAAM,CAAC,kBAAkB,CAAC,YAAY,CAAC,gBAAgB,CAAC;YACzD,CAAC;QACF,CAAC;QAsBD,kBAAa,GAAG;YACT,uCAAmD,EAAjD,oBAAO,EAAE,kBAAM,CAAkC;YAEzD,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACb,IAAM,gBAAgB,GAAG,KAAI,CAAC,gBAAgB,EAAE;gBAEhD,EAAE,CAAC,CAAC,gBAAgB,GAAG,EAAE,CAAC,CAAC,CAAC;oBAC3B,KAAI,CAAC,MAAM,GAAG,MAAM;oBACpB,MAAM,CAAC,MAAM;gBACd,CAAC;YACF,CAAC;YAED,KAAI,CAAC,WAAW,GAAG,KAAK;YAExB,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,gBAAgB,EAAE;YAErC,MAAM,CAAC,KAAI,CAAC,MAAM;QACnB,CAAC;QAzeA,IAAI,CAAC,aAAa,GAAG;YACpB,OAAO,EAAE,EAAE;YACX,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,QAAQ;YACrD,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,MAAM;YAChD,YAAY,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI;YAC3C,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO;YACxC,SAAS,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;YACnC,kBAAkB,EAAE,IAAI;SACxB;QAED,IAAI,CAAC,eAAe,GAAG,IAAI,4EAAe,CAAC,EAAE,CAAC;QAE9C,qBAAqB,CAAC,EAAE,CAAC,eAAe,CAAC,YAAY,EAAE;YACtD,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC;gBACzB,MAAM;YACP,CAAC;YAED,KAAI,CAAC,aAAa,CAAC,OAAO,EAAE;YAC5B,KAAI,CAAC,aAAa,GAAG,IAAI;QAC1B,CAAC,CAAC;QAEF,qBAAqB,CAAC,MAAM,CAAC,eAAe,CAAC,MAAM,EAAE,UAAC,EAAE;YACvD,KAAI,CAAC,eAAe,CAAC,KAAK,EAAE;YAC5B,MAAM,CAAC,IAAI;QACZ,CAAC,CAAC;IACH,CAAC;IAED,wCAAe,GAAf;QACC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC;QACtD,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC;QAEpE,IAAI,CAAC,gBAAgB,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,gBAAgB,CAAC;QACnE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;IAC9F,CAAC;IAED,oCAAW,GAAX;QACC,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,CAAC;QACzD,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC;QAEvE,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE;IACnC,CAAC;IAsFD,uCAAc,GAAd;QACC,EAAE,CAAC,CAAC,CAAC,8EAAc,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;YACxD,MAAM,CAAC,KAAK;QACb,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,KAAK,CAAC;IACxC,CAAC;IAED,8CAAqB,GAArB;QACC,IAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YACzC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,uBAAuB,CAAC;YACrD,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,wBAAwB,EAAE,EAAE,QAAQ,EAAE,oBAAoB,EAAE,CAAC;YAC9F,OAAO,EAAE,CAAC,IAAI,CAAC;SAChB,CAAC;QACF,KAAK,CAAC,OAAO,EAAE;IAChB,CAAC;IAqEO,uCAAc,GAAtB;QAAA,iBAiBC;QAhBA,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACxB,MAAM;QACP,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;YAC9B,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,gDAAM,EAAE;QACnC,CAAC;QAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QACnE,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,EAAE;QACzC,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE;QAEhC,aAAa,CAAC,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC;QAChD,IAAI,CAAC,aAAa,CAAC,cAAc,GAAG,MAAM,CAAC,WAAW,CAAC;YACtD,KAAI,CAAC,aAAa,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,KAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,IAAI;QACjF,CAAC,EAAE,GAAG,CAAC;IACR,CAAC;IAgID,yCAAgB,GAAhB,UAAiB,OAAO;QACvB,MAAM,CAAC,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY;IACnD,CAAC;IAkBD,8CAAqB,GAArB;QAAA,iBAiBC;QAhBA,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,qBAAqB,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YACnF,MAAM;QACP,CAAC;QAEO,oDAAS,CAA+B;QAEhD,EAAE,CAAC,CAAC,SAAS,GAAG,4BAA4B,CAAC,CAAC,CAAC;YAC9C,IAAI,CAAC,eAAe,GAAG,IAAI;YAE3B,UAAU,CAAC;gBACV,KAAI,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,UAAC,SAAS;oBACtC,KAAI,CAAC,qBAAqB,GAAG,SAAS,KAAK,CAAC;oBAC5C,KAAI,CAAC,eAAe,GAAG,KAAK;gBAC7B,CAAC,CAAC;YACH,CAAC,EAAE,CAAC,CAAC;QACN,CAAC;IACF,CAAC;IA4DD,+CAAsB,GAAtB;QACC,IAAM,EAAE,GAAG,IAAI,CAAC,uBAAuB,EAAE;QAEzC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACT,MAAM,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE;QACtC,CAAC;QAEK;;UAEJ,EAFM,oBAAO,EAAE,kBAAM,CAErB;QAEF,MAAM,CAAC,EAAE,OAAO,WAAE,MAAM,UAAE;IAC3B,CAAC;IAED,yCAAgB,GAAhB;QACS,gDAAM,CAAiC;QAE/C,MAAM,CAAC,MAAM;IACd,CAAC;IAqBD,0CAAiB,GAAjB,UAAkB,KAAY;QAC7B,IAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAEnC,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;YAC1D,MAAM,CAAC,KAAK;QACb,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,UAAC,KAAK;YAClC,YAAK,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,UAAC,CAAC;gBAC5B,QAAC,CAAC,WAAW,EAAE,KAAK,OAAO,CAAC,aAAa,EAAE;YAA3C,CAA2C,CAC3C,GAAG,CAAC,CAAC;QAFN,CAEM,CACN,KAAK,CAAC,CAAC;IACT,CAAC;IAED,oCAAW,GAAX,UAAY,OAAsB;QACjC,IAAM,WAAW,GAAG,OAAO,CAAC,MAAM,CAAC;QAEnC,EAAE,CAAC,CAAC,CAAC,WAAW,IAAI,CAAC,WAAW,CAAC,YAAY,IAAI,IAAI,CAAC,cAAc,KAAK,EAAE,CAAC,CAAC,CAAC;YAC7E,MAAM;QACP,CAAC;QAED,IAAI,CAAC,cAAc,GAAG,WAAW,CAAC,YAAY,CAAC,UAAU;IAC1D,CAAC;IAED,+BAAM,GAAN;QAAA,iBA0BC;QAzBA,UAAU,CAAC;YACV,EAAE,CAAC,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBACf,KAAI,CAAC,IAAI,CAAC,UAAU,GAAG,KAAI,CAAC,cAAc;YAC3C,CAAC;YAED,IAAM,QAAQ,GAAG,EAAE;YAEnB,IAAM,OAAO,GAAG,EAAE;YAClB,IAAM,OAAO,GAAG,QAAQ,GAAC,CAAC;YAE1B,IAAM,aAAa,GAAG,KAAI,CAAC,MAAM,CAAC,aAAa;YAE/C,IAAM,QAAQ,GAAI,aAAa,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAEnE,QAAQ,CAAC,KAAK,CAAC,SAAS,GAAI,GAAG;YAC/B,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAO,GAAG;YAE/B,IAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;YAEjF,kBAAkB;YAClB,QAAQ,CAAC,KAAK,CAAC,SAAS,GAAI,aAAa,GAAG,IAAI;YAChD,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAO,aAAa,GAAG,IAAI;YAEhD,KAAI,CAAC,eAAe,EAAE;QACvB,CAAC,EAAE,GAAG,CAAC;IACR,CAAC;IAED,oCAAW,GAAX;QACC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YAChB,MAAM;QACP,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,EAAE;YACjC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;SACpB,CAAC;IACH,CAAC;IAED,oCAAW,GAAX,UAAY,MAAc;QACzB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACf,MAAM;QACP,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,EAAE;YAC5B,MAAM;SACN,CAAC;IAEH,CAAC;IA/lBQ;QAAR,oEAAK,EAAE;;oDAAS;IACR;QAAR,oEAAK,EAAE;;gDAAK;IACJ;QAAR,oEAAK,EAAE;;iEAAsB;IACrB;QAAR,oEAAK,EAAE;;4DAAiB;IAChB;QAAR,oEAAK,EAAE;;2DAAgB;IAEd;QAAT,qEAAM,EAAE;;uDAAiC;IAEpB;QAArB,0EAAS,CAAC,SAAS,CAAC;kCAAU,iEAAU;mDAAA;IACpB;QAApB,0EAAS,CAAC,QAAQ,CAAC;kCAAS,iEAAU;kDAAA;IAV3B,cAAc;QAJ1B,wEAAS,CAAC;YACV,QAAQ,EAAE,iBAAiB;WACF;SACzB,CAAC;yFAsC6B;YACJ,gEAAqB;YAC5B,+EAAQ;YACL,qEAAW;YAChB,6EAAM;YACH,mEAAgB;YACpB,sEAAK;YACK,WAAe;OA5C7B,cAAc,CAimB1B;IAAD,CAAC;AAAA;SAjmBY,cAAc,iB;;;;;;;;ACvE3B;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { NewMessagePage } from './new-message'\n\nimport { ComponentsModule } from \"../../components/components.module\";\nimport { TopicComponentsModule } from \"../../components/topic/topicComponentsModule\";\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n\tdeclarations: [\n\t\tNewMessagePage,\n\t],\n\timports: [\n\t\tIonicPageModule.forChild(NewMessagePage),\n\t\tComponentsModule,\n\t\tTopicComponentsModule,\n\t\tTranslateModule.forChild(),\n\t],\n\tentryComponents: [\n\t\tNewMessagePage,\n\t]\n})\nexport class NewMessagePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-message/new-message.module.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from 'ionic-angular';\n\nimport { ResponsiveDatePipe } from \"../lib/pipes/responsiveDate\";\nimport { MaxValuePipe } from \"../lib/pipes/maxValue\";\nimport { FilenameLimitPipe } from \"../lib/pipes/filenameLimit\";\n\nimport { UserImageComponent } from \"./userImage\";\nimport { Navigator } from \"./navigator/navigator\";\nimport { LoadComponent } from \"./load\"\nimport { LoadingProgress } from \"./loadingProgress\"\n\nimport { HexagonComponent } from \"./hexagon\";\nimport { NavigatorHexagon } from \"./navigator/hexagon\";\nimport { NavigatorIcon } from \"./navigator/icon\";\n\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n\tdeclarations: [\n\t\tResponsiveDatePipe,\n\t\tMaxValuePipe,\n\t\tFilenameLimitPipe,\n\t\tUserImageComponent,\n\t\tLoadComponent,\n\t\tLoadingProgress,\n\t\tHexagonComponent,\n\t\tNavigator,\n\t\tNavigatorHexagon,\n\t\tNavigatorIcon\n\t],\n\timports: [\n\t\tIonicModule,\n\t\tCommonModule,\n\t\tTranslateModule.forChild()\n\t],\n\texports: [\n\t\tResponsiveDatePipe,\n\t\tMaxValuePipe,\n\t\tFilenameLimitPipe,\n\t\tUserImageComponent,\n\t\tLoadComponent,\n\t\tLoadingProgress,\n\t\tHexagonComponent,\n\t\tCommonModule,\n\t\tNavigator,\n\t\tNavigatorHexagon,\n\t\tNavigatorIcon,\n\t]\n})\nexport class ComponentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Pipe } from \"@angular/core\";\nimport { DatePipe } from \"@angular/common\"; // tslint:disable-line:no-unused-variable\n\n@Pipe({\n\tname: \"responsiveDate\"\n})\nexport class ResponsiveDatePipe {\n\n\tconstructor(private datePipe: DatePipe) {}\n\n\ttransform(value: any): string {\n\t\tif(!value) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif(typeof value === \"number\") {\n\t\t\tvalue = new Date(value);\n\t\t}\n\n\t\tlet format: string;\n\n\t\tlet now: Date = new Date();\n\t\tnow.setHours(0, 0, 0, 0);\n\n\t\tlet date_norm: Date = new Date(value);\n\t\tdate_norm.setHours(0, 0, 0, 0);\n\n\t\tconst diff_norm: number = (now.getTime() - date_norm.getTime()) / 1000;\n\n\t\tconst YESTERDAY = 24 * 60 * 60\n\n\t\tif(diff_norm === 0) { // same day\n\t\t\tformat = \"HH:mm\";\n\t\t} else if(diff_norm == YESTERDAY) {\n\t\t\treturn \"Yesterday\";\n\t\t} else if(diff_norm <= YESTERDAY * 6) {\n\t\t\tformat = \"EEEE\";\n\t\t} else {\n\t\t\tformat = \"dd.MM.y\"\n\t\t}\n\n\t\treturn this.datePipe.transform(value, format);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pipes/responsiveDate.ts","import { Pipe, PipeTransform } from \"@angular/core\"; // tslint:disable-line:no-unused-variable\n\n@Pipe({name: \"maxValue\"})\nexport class MaxValuePipe implements PipeTransform {\n\ttransform(value: number, max: number): string {\n\t\tif(value > max) {\n\t\t\treturn max + \"+\";\n\t\t}\n\t\treturn value.toString();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pipes/maxValue.ts","import { Pipe, PipeTransform } from \"@angular/core\"; // tslint:disable-line:no-unused-variable\n\n@Pipe({name: \"filenameLimit\"})\nexport class FilenameLimitPipe implements PipeTransform {\n\ttransform(str: string, max: number): string {\n\t\tif(str.length > max) {\n\t\t\tlet type = str.substring(str.lastIndexOf(\".\") + 1, str.length);\n\n\t\t\treturn `${str.substring(0, max - type.length - 3)}...${type}`;\n\t\t}\n\n\t\treturn str;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pipes/filenameLimit.ts","import { Component, Input } from \"@angular/core\";\n\nimport settings from \"../lib/services/settings.service\"\n\nconst DEFAULT_IMAGE = \"assets/img/user.png\"\n\n@Component({\n\tselector: \"user-image\",\n\ttemplateUrl: \"userImage.svg\"\n})\nexport class UserImageComponent {\n\tprivate _image: string = DEFAULT_IMAGE\n\n\t@Input() hideBlocked = true\n\n\t@Input()\n\tset image(image: string) {\n\t\tif (image) {\n\t\t\tthis._image = image\n\t\t\treturn\n\t\t}\n\n\t\tthis._image = DEFAULT_IMAGE\n\t}\n\n\tget image(): string {\n\t\tif (this.hideBlocked && settings.isBlocked(parseInt(this.id, 10))) {\n\t\t\treturn \"assets/img/blocked.png\"\n\t\t}\n\n\t\treturn this._image;\n\t}\n\n\t@Input() id: string;\n\n\trandomId: string = Math.random().toString()\n\n\tgetId() {\n\t\treturn `userimage-${this.id}-${this.randomId}`\n\t}\n\n\tgetUrl() {\n\t\treturn `url(#${this.getId()})`\n\t}\n\n\tconstructor() {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/userImage.ts","import { Component, Input, Output, EventEmitter } from \"@angular/core\"\nimport { NavController } from \"ionic-angular\"\n\nimport sessionService from \"../../lib/services/session.service\"\n\nconst EASTER_EGG_THRESHOLD = 10 * 1000\n\ninterface NodeWithBounds {\n\tnode: Element,\n\tbounds: ClientRect\n}\n\n@Component({\n\tselector: \"navigator\",\n\ttemplateUrl: \"navigator.html\"\n})\nexport class Navigator {\n\n\t@Input() icon: string = \"plus\"\n\n\t@Output() invoke = new EventEmitter()\n\n\tconstructor(private navCtrl: NavController) {}\n\n\topen = false\n\n\tcloseOnTouchEnd = false\n\n\tprofile: NodeWithBounds = null\n\tsearch: NodeWithBounds = null\n\tcontacts: NodeWithBounds = null\n\tsettings: NodeWithBounds = null\n\n\tonTap = () => {\n\t\tclearTimeout(this.easterEgg)\n\t\tif (this.open) {\n\t\t\tthis.open = false\n\t\t} else {\n\t\t\tthis.invoke.emit()\n\t\t}\n\t}\n\n\tonPress = () => {\n\t\tif (this.open) {\n\t\t\tthis.closeOnTouchEnd = true\n\t\t} else {\n\t\t\tthis.open = true;\n\t\t}\n\t}\n\n\teasterEgg = null\n\tenableEasterEgg = () => {\n\t\tconst navigators = document.querySelectorAll('.navigator');\n\t\tfor (let i = 0 ; i < navigators.length; i++) {\n\t\t\tnavigators.item(i).classList.add('easteregg')\n\t\t}\n\t}\n\n\tisOnSubmenu = (bounds: ClientRect, event: TouchEvent) => {\n\t\tconst { left, top, width: diameter } = bounds\n\t\tconst centerX = left + diameter / 2\n\t\tconst centerY = top + diameter / 2\n\t\tfor (let i = 0; i < event.changedTouches.length; i++) {\n\t\t\tconst { clientX, clientY } = event.changedTouches.item(i)\n\t\t\tconst distance = Math.sqrt(Math.pow(centerX - clientX, 2) + Math.pow(centerY - clientY, 2))\n\t\t\tif (distance < ( diameter / 2 ) * 1.5) return true\n\t\t}\n\t\treturn false\n\t}\n\n\tgetNodeWithBounds = (ancestor, selector) => {\n\t\tconst node = ancestor.querySelector(selector)\n\t\tconst bounds = node.getBoundingClientRect()\n\t\treturn { node, bounds }\n\t}\n\n\tonTouchStart = (e) => {\n\t\tlet menu = e.target\n\t\twhile (menu && !menu.classList.contains('navigator')) {\n\t\t\tmenu = menu.parentElement\n\t\t}\n\t\tif (menu) {\n\t\t\tthis.profile = this.getNodeWithBounds(menu, '.sub-menu.profile')\n\t\t\tthis.search = this.getNodeWithBounds(menu, '.sub-menu.search')\n\t\t\tthis.contacts = this.getNodeWithBounds(menu, '.sub-menu.contacts')\n\t\t\tthis.settings = this.getNodeWithBounds(menu, '.sub-menu.settings')\n\t\t}\n\t\tthis.easterEgg = setTimeout(this.enableEasterEgg, EASTER_EGG_THRESHOLD)\n\t}\n\n\tonTouchEnd = (e: TouchEvent) => {\n\t\tconst nodesWithBounds = [ this.search, this.profile, this.contacts, this.settings ]\n\t\tfor (let { node } of nodesWithBounds ) {\n\t\t\tnode.classList.remove('active')\n\t\t}\n\t\tif (this.open) {\n\t\t\tif (this.isOnSubmenu(this.profile.bounds, e)) this.invokeProfile()\n\t\t\tif (this.isOnSubmenu(this.search.bounds, e)) this.invokeSearch()\n\t\t\tif (this.isOnSubmenu(this.contacts.bounds, e)) this.invokeContacts()\n\t\t\tif (this.isOnSubmenu(this.settings.bounds, e)) this.invokeSettings()\n\t\t}\n\t\tif (this.closeOnTouchEnd) {\n\t\t\tthis.open = false\n\t\t\tthis.closeOnTouchEnd = false\n\t\t}\n\t\tclearTimeout(this.easterEgg)\n\t}\n\n\tonTouchMove = (e: TouchEvent) => {\n\t\tif (this.open) {\n\t\t\tfor (let { node, bounds } of [this.profile, this.contacts, this.settings, this.search]) {\n\t\t\t\tif (this.isOnSubmenu(bounds, e)) {\n\t\t\t\t\tnode.classList.add('active')\n\t\t\t\t} else {\n\t\t\t\t\tnode.classList.remove('active')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\te.preventDefault()\n\t}\n\n\tclose() {\n\t\tclearTimeout(this.easterEgg)\n\t\tthis.open = false\n\t}\n\n\tinvokeProfile() {\n\t\tthis.close()\n\t\tconst userId = sessionService.userid\n\t\tthis.navCtrl.push(\"Profile\", { userId })\n\t}\n\n\tinvokeContacts() {\n\t\tthis.close()\n\t\tthis.navCtrl.push(\"Contacts\")\n\t}\n\n\tinvokeSearch() {\n\t\tthis.close()\n\t\tthis.navCtrl.push(\"Contacts\", { search: true })\n\t}\n\n\tinvokeSettings() {\n\t\tthis.close()\n\t\tthis.navCtrl.push(\"Settings\")\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navigator/navigator.ts","import { Component, Input } from \"@angular/core\";\nimport { DomSanitizer } from \"@angular/platform-browser\"; // tslint:disable-line:no-unused-variable\n\n@Component({\n\tselector: \"load\",\n\ttemplate: `<div [innerHTML]=\"html\"></div>`\n})\nexport class LoadComponent {\n\tpublic html;\n\tconstructor(private sanitizer: DomSanitizer) {};\n\n\t@Input()\n\tset name(name: string) {\n\t\tconst icon = require(`../assets/images/icons/${name}.svg`)\n\n\t\tthis.html = this.sanitizer.bypassSecurityTrustHtml(icon)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/load.ts","var map = {\n\t\"./add.svg\": 452,\n\t\"./added.svg\": 453,\n\t\"./deny.svg\": 454,\n\t\"./write.svg\": 455\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 451;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons ^\\.\\/.*\\.svg$\n// module id = 451\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"add\\\" class=\\\"fill-primary\\\" d=\\\"M480.5,880L435.985,854.25V802.759L480.5,777.013l44.515,25.746V854.25ZM496,832H484v12h-7V832H465v-7h12V813h7v12h12v7Z\\\" transform=\\\"translate(-436 -777)\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/add.svg\n// module id = 452\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"added\\\" class=\\\"fill-primary\\\" d=\\\"M480.5,880L435.985,854.25V802.759L480.5,777.013l44.515,25.746V854.25Zm18.5-61.23-24.725,24.24-12.291-12.032,4.869-4.753,7.422,7.278,19.855-19.487Z\\\" transform=\\\"translate(-436 -777)\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/added.svg\n// module id = 453\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"deny\\\" class=\\\"fill-grey\\\" d=\\\"M953.5,880L908.985,854.25V802.759L953.5,777.013l44.515,25.746V854.25Zm8.485-38.061L953.5,833.45l-8.485,8.485-4.95-4.95,8.485-8.485-8.485-8.485,4.95-4.95,8.485,8.485,8.485-8.485,4.95,4.95L958.45,828.5l8.485,8.485Z\\\" transform=\\\"translate(-909 -777)\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/deny.svg\n// module id = 454\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"write_corner\\\" data-name=\\\"write corner\\\" class=\\\"fill-primaryDark\\\" d=\\\"M6.577,102l6.651-24.883L31.4,95.331Z\\\"/>\\n  <path id=\\\"write\\\" class=\\\"fill-primary\\\" d=\\\"M44.5,103L0,77.25V25.75L44.5,0,89,25.75v51.5ZM19,43.149V36.994H70V43.15H19ZM70,55.078H19V48.922H70v6.156ZM50,67.006H19V60.851H50v6.156Z\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/write.svg\n// module id = 455\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","import { Component, Input, ElementRef } from \"@angular/core\";\n\n@Component({\n\tselector: \"loading-progress\",\n\ttemplateUrl: \"loadingProgress.html\"\n})\nexport class LoadingProgress {\n\n\t@Input() className: string\n\t@Input() progress: any\n\t@Input() backgroundClass: string\n\t@Input() foregroundClass: string\n\n\tprivate _progressColor\n\tprivate _progressBackground\n\tprivate _background;\n\n\tprivate getBackgroundElement() {\n\t\tlet element = this.element.nativeElement.parentElement\n\t\twhile (element && !element.classList.contains(this.backgroundClass)) {\n\t\t\telement = element.parentElement\n\t\t}\n\t\treturn element\n\t}\n\n\tprivate getForegroundElement() {\n\t\tlet element = this.element.nativeElement.querySelector('.dummy')\n\t\treturn element.classList.contains(this.foregroundClass) ? element : null\n\t}\n\n\tprivate get progressColor() {\n\t\tif (!this._progressColor) {\n\t\t\tconst element = this.getForegroundElement()\n\t\t\tthis._progressColor = element? window.getComputedStyle(element)\n\t\t\t\t.getPropertyValue('color') : null\n\t\t}\n\t\treturn this._progressColor\n\t}\n\n\tprivate get progressBackground() {\n\t\tif (!this._progressBackground) {\n\t\t\tconst element = this.getForegroundElement()\n\t\t\tthis._progressBackground = element? window.getComputedStyle(element)\n\t\t\t\t.getPropertyValue('background-color') : null\n\t\t}\n\t\treturn this._progressBackground\n\t}\n\n\tget background() {\n\t\tif (!this._background !== undefined) {\n\t\t\tconst element = this.getBackgroundElement()\n\t\t\tif (!element) { this._background = 'inherit' }\n\t\t\tthis._background = window.getComputedStyle(element)\n\t\t\t\t.getPropertyValue('background-color')\n\t\t}\n\t\treturn this._background\n\t}\n\n\tget progressArc() {\n\t\tconst progress = this.progress()\n\t\tconst { progressBackground, progressColor } = this\n\t\tif (!progressBackground || !progressColor) { return \"\" }\n\t\tlet deg, result\n\t\tif (progress <= 0.5) {\n\t\t\tdeg = 90 + 180 * progress * 2\n\t\t\tresult = `linear-gradient(90deg, ${progressBackground} 50%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0)), linear-gradient(${deg}deg, ${progressColor} 50%, ${progressBackground} 50%, ${progressBackground})`\n\t\t} else {\n\t\t\tdeg = -90 + 180 * (2 * (progress-.5))\n\t\t\tresult = `linear-gradient(${deg}deg, ${progressColor} 50%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0)), linear-gradient(270deg, ${progressColor} 50%, ${progressBackground} 50%, ${progressBackground})`\n\t\t}\n\t\treturn result\n\t}\n\n\tconstructor(private element: ElementRef) { }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/loadingProgress.ts","import { Component } from \"@angular/core\";\n\n@Component({\n\tselector: \"hexagon\",\n\ttemplateUrl: \"hexagon.svg\"\n})\nexport class HexagonComponent {\n\tconstructor() {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/hexagon.ts","import { Component } from \"@angular/core\";\n\n@Component({\n\tselector: \"navigator-hexagon\",\n\ttemplateUrl: \"hexagon.svg\"\n})\nexport class NavigatorHexagon {\n\tconstructor() {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navigator/hexagon.ts","import { Component, Input } from \"@angular/core\"\n\n@Component({\n\tselector: \"navigator-icon\",\n\ttemplateUrl: \"icon.html\"\n})\nexport class NavigatorIcon {\n\t@Input() icon: string = 'plus'\n\tconstructor() { }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navigator/icon.ts","export default class Memoizer {\n\tvalues: any[]\n\tcachedValue: any\n\tconstructor(private selectors: Function[], private reduce: Function) {}\n\n\thasChanged(newValues) {\n\t\tif (!this.values) {\n\t\t\treturn true\n\t\t}\n\n\t\tconst index = newValues.findIndex((val, index) => {\n\t\t\tconst previousVal = this.values[index]\n\n\t\t\tif (previousVal === val) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (Array.isArray(val) && Array.isArray(previousVal) && val.length  === 0 && previousVal.length === 0) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn true\n\t\t})\n\n\t\tif (index > -1) {\n\t\t\t// console.warn(`Memoizer recalculated at ${index}`, this.values, newValues)\n\t\t}\n\n\t\treturn index > -1\n\t}\n\n\tgetValue() {\n\t\tconst newValues = this.selectors.map((selector) => selector())\n\n\t\tif (!this.hasChanged(newValues)) {\n\t\t\treturn this.cachedValue\n\t\t}\n\n\t\tthis.values = newValues\n\t\tthis.cachedValue = this.reduce(...this.values, this.cachedValue)\n\n\t\treturn this.cachedValue\n\t}\n}\n\nexport class SameArray {\n\tprivate arr: any[] = []\n\tprivate previousInput: any[]\n\n\tsetValue = (newValues: any[]) => {\n\t\tif (this.previousInput === newValues) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.arr.splice(0, this.arr.length)\n\t\tthis.arr.push.apply(this.arr, newValues)\n\t\tthis.previousInput = newValues\n\t}\n\tgetValue = () => this.arr\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/asset/memoizer.ts","import * as Bluebird from \"bluebird\"\n\nimport h from \"../helper/helper\"\nimport Progress from \"../asset/Progress\"\nimport blobService, { BlobType, unpath } from \"./blobService\"\nimport blobCache from \"../asset/blobCache\"\nimport Queue from '../asset/Queue'\n\nconst defaultUploadOptions = {\n\tencrypt: true,\n\textraInfo: {}\n}\n\nconst uploadQueue = new Queue(3);\nuploadQueue.start();\n\nconst encryptionQueue = new Queue(500 * 1000);\nencryptionQueue.start();\n\nclass FileUpload {\n\tprivate progress: Progress\n\tprotected options\n\tprivate blob: BlobType\n\n\tconstructor(protected file, options?) {\n\t\tthis.progress = new Progress()\n\t\tthis.blob = blobService.createBlob(file)\n\n\t\tthis.options = options || defaultUploadOptions\n\t}\n\n\tgetProgress = () => {\n\t\treturn this.progress.getProgress();\n\t};\n\n\tprotected uploadAndEncryptPreparedBlob = (encryptionKey, blob: BlobType) => {\n\t\tthis.progress.addDepend(blob.uploadProgress)\n\t\tthis.progress.addDepend(blob.encryptProgress)\n\n\t\treturn encryptionQueue.enqueue(blob.getSize(), () => {\n\t\t\treturn blob.encryptAndUpload(encryptionKey)\n\t\t})\n\t}\n\n\tprotected uploadPreparedBlob = (blob: BlobType) => {\n\t\tthis.progress.addDepend(blob.uploadProgress)\n\n\t\treturn blob.upload()\n\t}\n\n\tupload = (encryptionKey) => {\n\t\tif (!this.blob) {\n\t\t\tthrow new Error(\"usage error: prepare was not called!\")\n\t\t}\n\n\t\treturn uploadQueue.enqueue(1, () => {\n\t\t\tconsole.info(\"Uploading blob\")\n\t\t\tif (this.options.encrypt) {\n\t\t\t\treturn this.uploadAndEncryptPreparedBlob(encryptionKey, this.blob)\n\t\t\t}\n\n\t\t\treturn this.uploadPreparedBlob(this.blob)\n\t\t}).then((keys) => {\n\t\t\tif (this.file.originalUrl) {\n\t\t\t\tconst { directory, name } = unpath(this.file.originalUrl)\n\n\t\t\t\treturn blobCache.moveFileToBlob(directory, name, this.blob.getBlobID()).then(() => keys)\n\t\t\t}\n\n\t\t\treturn keys\n\t\t})\n\t}\n\n\tprepare = h.cacheResult(() => {\n\t\treturn FileUpload.blobToDataSet(this.blob).then((data) => {\n\t\t\tdata.content = {\n\t\t\t\t...data.content,\n\t\t\t\t...this.getInfo()\n\t\t\t}\n\n\t\t\treturn data\n\t\t})\n\t})\n\n\tgetInfo = () => {\n\t\treturn {\n\t\t\tname: this.file.name,\n\t\t\tsize: this.file.size,\n\t\t\ttype: this.file.type,\n\t\t\t...this.options.extraInfo\n\t\t}\n\t}\n\n\tgetFile = () => {\n\t\treturn this.file\n\t}\n\n\tgetName = () => {\n\t\treturn this.file.name;\n\t}\n\n\tstatic blobToDataSet(blob) {\n\t\treturn Bluebird.all([blob.preReserveID(), blob.getHash()]).spread((blobID, hash) => {\n\t\t\treturn {\n\t\t\t\tblob: blob,\n\t\t\t\tcontent: {\n\t\t\t\t\tblobHash: hash\n\t\t\t\t},\n\t\t\t\tmeta: {\n\t\t\t\t\tblobID: blobID\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tstatic fileCallback(cb) {\n\t\treturn (e) => {\n\t\t\tcb(Array.prototype.slice.call(e.target.files));\n\n\t\t\ttry {\n\t\t\t\te.target.value = null;\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.log(ex);\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport default FileUpload\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/fileUpload.service.ts","import { TranslateService } from '@ngx-translate/core'\n\nconst contactsService = require(\"../../lib/services/friendsService\");\nconst userService = require(\"../../lib/users/userService\").default;\nimport errorService from \"../../lib/services/error.service\";\n\nimport * as Bluebird from 'bluebird';\n\nimport h from \"../helper/helper\";\n\nimport Memoizer from \"../../lib/asset/memoizer\"\n\nconst filterContacts = (contacts, searchTerm) => {\n\tif (!searchTerm) {\n\t\treturn contacts;\n\t}\n\n\treturn contacts.filter((contact) =>\n\t\tcontact.names.searchName.indexOf(searchTerm.toLowerCase()) > -1\n\t)\n}\n\nexport class ContactsWithSearch {\n\tcontacts: any[] = [];\n\tcontactsLoading: boolean = true;\n\n\tsearchResults: any[] = [];\n\tsearchResultsLoading: boolean = false;\n\n\tloadedContactIDs: number[] = []\n\n\tsearchTerm: string = \"\";\n\n\tprivate memoizer: Memoizer\n\n\tconstructor(public translate: TranslateService) {\n\t\tthis.memoizer = new Memoizer([\n\t\t\t() => this.contacts,\n\t\t\t() => this.searchResults,\n\t\t\t() => this.searchTerm\n\t\t], (contacts, searchResults, searchTerm) => {\n\t\t\treturn filterContacts(contacts, searchTerm).concat(searchResults)\n\t\t})\n\t}\n\n\tstatic sort = (users) => users.sort((a: any, b: any): number => {\n\t\tconst firstAvailable = a.names.firstname && b.names.firstname;\n\t\tconst lastAvailable = a.names.lastname && b.names.firstname;\n\n\t\tif(!firstAvailable && !lastAvailable) {\n\t\t\treturn a.name.localeCompare(b.name);\n\t\t} else if (!firstAvailable) {\n\t\t\treturn a.names.lastname.localeCompare(b.names.lastname);\n\t\t} else {\n\t\t\treturn a.names.firstname.localeCompare(b.names.firstname);\n\t\t}\n\t});\n\n\tprotected loadContactsUsers = () => {\n\t\tvar contacts = contactsService.getFriends();\n\n\t\tif (h.arrayEqual(this.loadedContactIDs, contacts)) {\n\t\t\treturn Bluebird.resolve()\n\t\t}\n\n\t\tthis.loadedContactIDs = contacts.slice()\n\n\t\treturn userService.getMultipleFormatted(contacts)\n\t\t\t.then((result: any[]) => ContactsWithSearch.sort(result))\n\t\t\t.then((result: any[]) => this.contacts = result)\n\t}\n\n\tcontactDividers = (record, recordIndex, records) => {\n\t\tconst firstChar: string = record.name[0];\n\n\t\tif(recordIndex === 0) {\n\t\t\tif (this.searchTerm) {\n\t\t\t\tif (record.isMyFriend) {\n\t\t\t\t\treturn this.translate.instant(\"chooseFriends.contacts\")\n\t\t\t\t} else {\n\t\t\t\t\treturn this.translate.instant(\"chooseFriends.global\")\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn firstChar.toUpperCase();\n\t\t}\n\n\t\tconst previousEntry = records[recordIndex - 1];\n\n\t\tif (this.searchTerm) {\n\t\t\tif (previousEntry.isMyFriend && !record.isMyFriend) {\n\t\t\t\treturn this.translate.instant(\"chooseFriends.global\")\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\n\t\tif(firstChar.toLowerCase() !== previousEntry.name[0].toLowerCase()) {\n\t\t\treturn firstChar.toUpperCase();\n\t\t}\n\n\t\tconsole.log('return null')\n\n\t\treturn null;\n\t}\n\n\texecuteSearch = h.debounce(() => {\n\t\tthis.searchResultsLoading = true;\n\n\t\tconst query = this.searchTerm;\n\t\tconst contacts = contactsService.getFriends();\n\n\t\tuserService.query(query).bind(this).filter((user) => {\n\t\t\treturn contacts.indexOf(user.getID()) === -1;\n\t\t}).map(function (user) {\n\t\t\tif (this.searchTerm !== query) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn user.loadBasicData().thenReturn(user);\n\t\t}).then(function (users) {\n\t\t\tif (this.searchTerm !== query) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treturn users.map(function (user) {\n\t\t\t\tuser.loadBasicData().catch(errorService.criticalError);\n\t\t\t\treturn user.data;\n\t\t\t});\n\t\t}).then((userData) => {\n\t\t\tthis.searchResults = userData || [];\n\t\t\tthis.searchResultsLoading = false;\n\t\t});\n\t}, 100)\n\n\tgetUsers = () => {\n\t\treturn this.memoizer.getValue()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/contacts/contactsWithSearch.ts","import * as Bluebird from \"bluebird\"\nimport h from \"../helper/helper\"\nimport screenSizeService from \"./screenSize.service\"\nimport FileUpload from \"./fileUpload.service\"\nimport blobService from \"./blobService\"\nimport Queue from '../asset/Queue'\n\nvar imageLib = require(\"blueimp-load-image/js/load-image\");\n\nvar canvasToBlob : any = Bluebird.promisify(h.canvasToBlob.bind(h));\n\nvar PREVIEWSDISABLED = false;\n\ntype previewType = {\n\t\"0\": string,\n\t\"90\": string,\n\t\"180\": string,\n\t\"270\": string,\n}\n\ntype size = {\n\tname: string,\n\trestrictions?: {\n\t\tmaxWidth: number,\n\t\tmaxHeight: number,\n\t\tsquare?: boolean\n\t}\n}\n\ntype options = {\n\tminimumSizeDifference: number,\n\tsizes: size[],\n\tgifSizes: size[],\n\tgif: boolean,\n\tencrypt: boolean,\n\textraInfo: Object\n}\n\nvar defaultOptions: options = {\n\tminimumSizeDifference: 1024,\n\tsizes: [\n\t\t{\n\t\t\tname: \"lowest\",\n\t\t\trestrictions: {\n\t\t\t\tmaxWidth: 640,\n\t\t\t\tmaxHeight: 480\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tname: \"middle\",\n\t\t\trestrictions: {\n\t\t\t\tmaxWidth: 1280,\n\t\t\t\tmaxHeight: 720\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tname: \"highest\",\n\t\t\trestrictions: {\n\t\t\t\tmaxWidth: 2560,\n\t\t\t\tmaxHeight: 1440\n\t\t\t}\n\t\t}\n\t],\n\tgifSizes: [\n\t\t{\n\t\t\tname: \"lowest\",\n\t\t\trestrictions: {\n\t\t\t\tmaxWidth: 640,\n\t\t\t\tmaxHeight: 480\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tname: \"highest\"\n\t\t}\n\t],\n\tgif: true,\n\tencrypt: true,\n\textraInfo: {}\n};\n\n/* TODO:\n\t- maximum size for a resolution\n\t- original: enable, remove meta-data (exif etc.)\n*/\n\nif (screenSizeService.mobile) {\n\tdefaultOptions.sizes = defaultOptions.sizes.filter((size) => {\n\t\treturn size.name !== \"highest\";\n\t});\n}\n\nconst uploadQueue = new Queue(3);\nuploadQueue.start();\n\nconst resizeQueue = new Queue(1);\nresizeQueue.start();\n\nconst sizeDiff = (a, b) => {\n\treturn a.blob.getSize() - b.blob.getSize();\n}\n\nconst sizeSorter = (a, b) => {\n\treturn sizeDiff(b, a);\n}\n\nclass ImageUpload extends FileUpload {\n\trotation = \"0\"\n\tprivate url: string\n\tprivate previewUrl: string\n\tprivate blobs: any[]\n\tprivate isGif: boolean\n\n\tconstructor(file, options?) {\n\t\tsuper(file, options || defaultOptions)\n\n\t\tif (!ImageUpload.isImage(file)) {\n\t\t\tthrow new Error(\"not an image!\");\n\t\t}\n\n\t\tif (file.type.match(/image.gif/) && !this.options.gif) {\n\t\t\tthrow new Error(\"no gifs supported!\");\n\t\t}\n\t}\n\n\tstatic isImage(file) {\n\t\treturn file.type.match(/image.*/)\n\t}\n\n\tstatic imageLibLoad(file, options?) {\n\t\treturn new Bluebird((resolve, reject) => {\n\t\t\timageLib(file, (canvas) => {\n\t\t\t\tif(canvas.type === \"error\") {\n\t\t\t\t\treject(canvas);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(canvas);\n\t\t\t\t}\n\t\t\t}, options);\n\t\t});\n\t}\n\n\tconvertForGallery = () => {\n\t\treturn {\n\t\t\tupload: this,\n\t\t\thighest: {\n\t\t\t\tloading: false,\n\t\t\t\tloaded: true,\n\t\t\t\turl: this.getUrl()\n\t\t\t},\n\t\t\tlowest: {\n\t\t\t\tloading: false,\n\t\t\t\tloaded: true,\n\t\t\t\turl: this.getUrl()\n\t\t\t}\n\t\t};\n\t};\n\n\tstatic rotate(img, angle) {\n\t\tswitch (angle) {\n\t\tcase \"0\":\n\t\t\treturn img;\n\t\tcase \"90\":\n\t\t\treturn ImageUpload.rotate90(img);\n\t\tcase \"180\":\n\t\t\treturn ImageUpload.rotate180(img);\n\t\tcase \"270\":\n\t\t\treturn ImageUpload.rotate270(img);\n\t\t}\n\n\t\treturn img;\n\t};\n\n\tprivate static rotateInternal(angle, img, flipRatio: boolean) {\n\t\tvar canvas = document.createElement(\"canvas\");\n\n\t\tif (flipRatio) {\n\t\t\tcanvas.width  = img.height;\n\t\t\tcanvas.height = img.width;\n\t\t} else {\n\t\t\tcanvas.width  = img.width;\n\t\t\tcanvas.height = img.height;\n\t\t}\n\n\t\tvar diff = canvas.width - canvas.height;\n\n\t\tvar newCtx = canvas.getContext(\"2d\");\n\n\t\tif (newCtx === null) {\n\t\t\tthrow new Error(\"could not initialize canvas context\")\n\t\t}\n\n\t\tnewCtx.translate(canvas.width/2, canvas.height/2);\n\t\tnewCtx.rotate(angle);\n\t\tnewCtx.translate(-canvas.width/2, -canvas.height/2);\n\t\tnewCtx.drawImage(img, flipRatio ? diff/2 : 0, flipRatio ? -diff/2 : 0);\n\n\t\treturn canvas;\n\t};\n\n\tprivate static rotate90(img) {\n\t\tvar angle = Math.PI/2;\n\n\t\treturn ImageUpload.rotateInternal(angle, img, true);\n\t};\n\n\tprivate static rotate180(img) {\n\t\tvar angle = Math.PI;\n\n\t\treturn ImageUpload.rotateInternal(angle, img, false)\n\t};\n\n\tprivate static rotate270(img) {\n\t\tvar angle = 3 * Math.PI/2;\n\n\t\treturn ImageUpload.rotateInternal(angle, img, true);\n\t};\n\n\trotate = () => {\n\t\treturn this.generatePreviews().then((previews) => {\n\t\t\tvar newDegree = \"0\";\n\t\t\tswitch(this.rotation) {\n\t\t\tcase \"0\":\n\t\t\t\tnewDegree = \"90\";\n\t\t\t\tbreak;\n\t\t\tcase \"90\":\n\t\t\t\tnewDegree = \"180\";\n\t\t\t\tbreak;\n\t\t\tcase \"180\":\n\t\t\t\tnewDegree = \"270\";\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.rotation = newDegree;\n\n\t\t\tthis.previewUrl = h.toUrl(previews[newDegree]);\n\n\t\t\treturn previews[newDegree];\n\t\t});\n\t};\n\n\tgeneratePreviews = h.cacheResult<Bluebird<previewType>>(() => {\n\t\tif (PREVIEWSDISABLED) {\n\t\t\treturn Bluebird.reject(new Error(\"Previews are disabled\"))\n\t\t}\n\n\t\treturn ImageUpload.imageLibLoad(h.toUrl(this.file), {\n\t\t\tmaxHeight: 200, canvas: true\n\t\t}).then((img) => {\n\t\t\treturn Bluebird.all([\n\t\t\t\tcanvasToBlob(img, \"image/jpeg\"),\n\t\t\t\tcanvasToBlob(ImageUpload.rotate90(img), \"image/jpeg\"),\n\t\t\t\tcanvasToBlob(ImageUpload.rotate180(img), \"image/jpeg\"),\n\t\t\t\tcanvasToBlob(ImageUpload.rotate270(img), \"image/jpeg\")\n\t\t\t]);\n\t\t}).spread((preview0, preview90, preview180, preview270) => {\n\t\t\tthis.previewUrl = h.toUrl(preview0);\n\n\t\t\treturn {\n\t\t\t\t\"0\": preview0,\n\t\t\t\t\"90\": preview90,\n\t\t\t\t\"180\": preview180,\n\t\t\t\t\"270\": preview270,\n\t\t\t}\n\t\t})\n\t})\n\n\tgetPreviewUrl = () => {\n\t\treturn this.previewUrl || this.getUrl()\n\t}\n\n\tgetUrl = () => {\n\t\tif (!PREVIEWSDISABLED) {\n\t\t\tthis.generatePreviews();\n\t\t}\n\n\t\tthis.url = this.url || h.toUrl(this.file);\n\t\tthis.previewUrl = this.previewUrl || this.url\n\t\treturn this.url;\n\t};\n\n\tupload = (encryptionKey?) => {\n\t\tif (!this.blobs) {\n\t\t\tthrow new Error(\"usage error: prepare was not called!\");\n\t\t}\n\n\t\tif (this.options.encrypt && !encryptionKey) {\n\t\t\tthrow new Error(\"No encryption key given\")\n\t\t}\n\n\t\treturn uploadQueue.enqueue(1, () => {\n\t\t\treturn Bluebird.resolve(this.blobs).bind(this).map((blobWithMetaData: any) => {\n\t\t\t\tconsole.info(\"Uploading blob\");\n\t\t\t\tif (this.options.encrypt) {\n\t\t\t\t\treturn this.uploadAndEncryptPreparedBlob(encryptionKey, blobWithMetaData.blob);\n\t\t\t\t}\n\n\t\t\t\treturn this.uploadPreparedBlob(blobWithMetaData.blob);\n\t\t\t});\n\t\t});\n\t};\n\n\tprivate _createSizeData = (size: size) => {\n\t\treturn resizeQueue.enqueue(1, () => {\n\t\t\treturn this._resizeFile(size).then((resizedImage) => {\n\t\t\t\treturn ImageUpload.blobToDataSet(blobService.createBlob(resizedImage.blob)).then((data: any) => {\n\t\t\t\t\tdata.content.gif = this.isGif;\n\t\t\t\t\tdata.content.width = resizedImage.width\n\t\t\t\t\tdata.content.height = resizedImage.height\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\tsize,\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t};\n\n\tprepare = h.cacheResult<Bluebird<any>>(() => {\n\t\tthis.isGif = !!this.file.type.match(/image.gif/i);\n\n\t\tvar sizes = this.isGif ? this.options.gifSizes : this.options.sizes;\n\n\t\treturn Bluebird.resolve(sizes)\n\t\t\t.map(this._createSizeData)\n\t\t\t.then(this._removeUnnededBlobs);\n\t})\n\n\tprivate _removeUnnededBlobs = (blobs) => {\n\t\tvar lastBlob, result = {};\n\n\t\tthis.blobs = blobs.sort(sizeSorter).filter((blob) => {\n\t\t\tvar keep = !lastBlob || this.isGif || sizeDiff(lastBlob, blob) > this.options.minimumSizeDifference;\n\n\t\t\tif (keep) {\n\t\t\t\tlastBlob = blob;\n\t\t\t}\n\n\t\t\tresult[blob.size.name] = lastBlob\n\n\t\t\treturn keep;\n\t\t});\n\n\t\treturn result;\n\t};\n\n\tprivate _getImage = h.cacheResult<Bluebird<any>>(() => {\n\t\treturn ImageUpload.imageLibLoad(this.getUrl());\n\t})\n\n\tprivate _resizeFile = (sizeOptions: size) => {\n\t\tif (this.isGif && !sizeOptions.restrictions) {\n\t\t\treturn Bluebird.resolve(this.file);\n\t\t}\n\n\t\tvar options: any = {\n\t\t\t...sizeOptions.restrictions || {},\n\t\t\tcanvas: true\n\t\t}\n\n\t\treturn this._getImage().then((img) => {\n\t\t\tif (options.square) {\n\t\t\t\timg = imageLib.scale(img, {\n\t\t\t\t\tcontain: true,\n\t\t\t\t\taspectRatio: 1\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst canvas = ImageUpload.rotate(imageLib.scale(img, options), this.rotation);\n\n\t\t\treturn canvasToBlob(canvas, \"image/jpeg\").then((blob) => {\n\t\t\t\treturn {\n\t\t\t\t\tblob,\n\t\t\t\t\twidth: canvas.width,\n\t\t\t\t\theight: canvas.height\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t}\n}\n\nexport default ImageUpload\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/imageUpload.service.ts","import Observer from \"../asset/observer\";\n\nclass ScreenSizeService extends Observer {\n\tmobile: true\n}\n\nexport default new ScreenSizeService();\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/screenSize.service.ts","/*\n * JavaScript Load Image\n * https://github.com/blueimp/JavaScript-Load-Image\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n */\n\n/* global define, URL, webkitURL, FileReader */\n\n;(function ($) {\n  'use strict'\n\n  // Loads an image for a given File object.\n  // Invokes the callback with an img or optional canvas\n  // element (if supported by the browser) as parameter:\n  function loadImage (file, callback, options) {\n    var img = document.createElement('img')\n    var url\n    img.onerror = function (event) {\n      return loadImage.onerror(img, event, file, callback, options)\n    }\n    img.onload = function (event) {\n      return loadImage.onload(img, event, file, callback, options)\n    }\n    if (loadImage.isInstanceOf('Blob', file) ||\n      // Files are also Blob instances, but some browsers\n      // (Firefox 3.6) support the File API but not Blobs:\n      loadImage.isInstanceOf('File', file)) {\n      url = img._objectURL = loadImage.createObjectURL(file)\n    } else if (typeof file === 'string') {\n      url = file\n      if (options && options.crossOrigin) {\n        img.crossOrigin = options.crossOrigin\n      }\n    } else {\n      return false\n    }\n    if (url) {\n      img.src = url\n      return img\n    }\n    return loadImage.readFile(file, function (e) {\n      var target = e.target\n      if (target && target.result) {\n        img.src = target.result\n      } else if (callback) {\n        callback(e)\n      }\n    })\n  }\n  // The check for URL.revokeObjectURL fixes an issue with Opera 12,\n  // which provides URL.createObjectURL but doesn't properly implement it:\n  var urlAPI = (window.createObjectURL && window) ||\n                (window.URL && URL.revokeObjectURL && URL) ||\n                (window.webkitURL && webkitURL)\n\n  function revokeHelper (img, options) {\n    if (img._objectURL && !(options && options.noRevoke)) {\n      loadImage.revokeObjectURL(img._objectURL)\n      delete img._objectURL\n    }\n  }\n\n  loadImage.isInstanceOf = function (type, obj) {\n    // Cross-frame instanceof check\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']'\n  }\n\n  loadImage.transform = function (img, options, callback, file, data) {\n    callback(loadImage.scale(img, options, data), data)\n  }\n\n  loadImage.onerror = function (img, event, file, callback, options) {\n    revokeHelper(img, options)\n    if (callback) {\n      callback.call(img, event)\n    }\n  }\n\n  loadImage.onload = function (img, event, file, callback, options) {\n    revokeHelper(img, options)\n    if (callback) {\n      loadImage.transform(img, options, callback, file, {})\n    }\n  }\n\n  // Transform image coordinates, allows to override e.g.\n  // the canvas orientation based on the orientation option,\n  // gets canvas, options passed as arguments:\n  loadImage.transformCoordinates = function () {\n    return\n  }\n\n  // Returns transformed options, allows to override e.g.\n  // maxWidth, maxHeight and crop options based on the aspectRatio.\n  // gets img, options passed as arguments:\n  loadImage.getTransformedOptions = function (img, options) {\n    var aspectRatio = options.aspectRatio\n    var newOptions\n    var i\n    var width\n    var height\n    if (!aspectRatio) {\n      return options\n    }\n    newOptions = {}\n    for (i in options) {\n      if (options.hasOwnProperty(i)) {\n        newOptions[i] = options[i]\n      }\n    }\n    newOptions.crop = true\n    width = img.naturalWidth || img.width\n    height = img.naturalHeight || img.height\n    if (width / height > aspectRatio) {\n      newOptions.maxWidth = height * aspectRatio\n      newOptions.maxHeight = height\n    } else {\n      newOptions.maxWidth = width\n      newOptions.maxHeight = width / aspectRatio\n    }\n    return newOptions\n  }\n\n  // Canvas render method, allows to implement a different rendering algorithm:\n  loadImage.renderImageToCanvas = function (\n    canvas,\n    img,\n    sourceX,\n    sourceY,\n    sourceWidth,\n    sourceHeight,\n    destX,\n    destY,\n    destWidth,\n    destHeight\n  ) {\n    canvas.getContext('2d').drawImage(\n      img,\n      sourceX,\n      sourceY,\n      sourceWidth,\n      sourceHeight,\n      destX,\n      destY,\n      destWidth,\n      destHeight\n    )\n    return canvas\n  }\n\n  // Determines if the target image should be a canvas element:\n  loadImage.hasCanvasOption = function (options) {\n    return options.canvas || options.crop || !!options.aspectRatio\n  }\n\n  // Scales and/or crops the given image (img or canvas HTML element)\n  // using the given options.\n  // Returns a canvas object if the browser supports canvas\n  // and the hasCanvasOption method returns true or a canvas\n  // object is passed as image, else the scaled image:\n  loadImage.scale = function (img, options, data) {\n    options = options || {}\n    var canvas = document.createElement('canvas')\n    var useCanvas = img.getContext ||\n                    (loadImage.hasCanvasOption(options) && canvas.getContext)\n    var width = img.naturalWidth || img.width\n    var height = img.naturalHeight || img.height\n    var destWidth = width\n    var destHeight = height\n    var maxWidth\n    var maxHeight\n    var minWidth\n    var minHeight\n    var sourceWidth\n    var sourceHeight\n    var sourceX\n    var sourceY\n    var pixelRatio\n    var downsamplingRatio\n    var tmp\n    function scaleUp () {\n      var scale = Math.max(\n        (minWidth || destWidth) / destWidth,\n        (minHeight || destHeight) / destHeight\n      )\n      if (scale > 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    function scaleDown () {\n      var scale = Math.min(\n        (maxWidth || destWidth) / destWidth,\n        (maxHeight || destHeight) / destHeight\n      )\n      if (scale < 1) {\n        destWidth *= scale\n        destHeight *= scale\n      }\n    }\n    if (useCanvas) {\n      options = loadImage.getTransformedOptions(img, options, data)\n      sourceX = options.left || 0\n      sourceY = options.top || 0\n      if (options.sourceWidth) {\n        sourceWidth = options.sourceWidth\n        if (options.right !== undefined && options.left === undefined) {\n          sourceX = width - sourceWidth - options.right\n        }\n      } else {\n        sourceWidth = width - sourceX - (options.right || 0)\n      }\n      if (options.sourceHeight) {\n        sourceHeight = options.sourceHeight\n        if (options.bottom !== undefined && options.top === undefined) {\n          sourceY = height - sourceHeight - options.bottom\n        }\n      } else {\n        sourceHeight = height - sourceY - (options.bottom || 0)\n      }\n      destWidth = sourceWidth\n      destHeight = sourceHeight\n    }\n    maxWidth = options.maxWidth\n    maxHeight = options.maxHeight\n    minWidth = options.minWidth\n    minHeight = options.minHeight\n    if (useCanvas && maxWidth && maxHeight && options.crop) {\n      destWidth = maxWidth\n      destHeight = maxHeight\n      tmp = sourceWidth / sourceHeight - maxWidth / maxHeight\n      if (tmp < 0) {\n        sourceHeight = maxHeight * sourceWidth / maxWidth\n        if (options.top === undefined && options.bottom === undefined) {\n          sourceY = (height - sourceHeight) / 2\n        }\n      } else if (tmp > 0) {\n        sourceWidth = maxWidth * sourceHeight / maxHeight\n        if (options.left === undefined && options.right === undefined) {\n          sourceX = (width - sourceWidth) / 2\n        }\n      }\n    } else {\n      if (options.contain || options.cover) {\n        minWidth = maxWidth = maxWidth || minWidth\n        minHeight = maxHeight = maxHeight || minHeight\n      }\n      if (options.cover) {\n        scaleDown()\n        scaleUp()\n      } else {\n        scaleUp()\n        scaleDown()\n      }\n    }\n    if (useCanvas) {\n      pixelRatio = options.pixelRatio\n      if (pixelRatio > 1) {\n        canvas.style.width = destWidth + 'px'\n        canvas.style.height = destHeight + 'px'\n        destWidth *= pixelRatio\n        destHeight *= pixelRatio\n        canvas.getContext('2d').scale(pixelRatio, pixelRatio)\n      }\n      downsamplingRatio = options.downsamplingRatio\n      if (downsamplingRatio > 0 && downsamplingRatio < 1 &&\n            destWidth < sourceWidth && destHeight < sourceHeight) {\n        while (sourceWidth * downsamplingRatio > destWidth) {\n          canvas.width = sourceWidth * downsamplingRatio\n          canvas.height = sourceHeight * downsamplingRatio\n          loadImage.renderImageToCanvas(\n            canvas,\n            img,\n            sourceX,\n            sourceY,\n            sourceWidth,\n            sourceHeight,\n            0,\n            0,\n            canvas.width,\n            canvas.height\n          )\n          sourceX = 0\n          sourceY = 0\n          sourceWidth = canvas.width\n          sourceHeight = canvas.height\n          img = document.createElement('canvas')\n          img.width = sourceWidth\n          img.height = sourceHeight\n          loadImage.renderImageToCanvas(\n            img,\n            canvas,\n            0,\n            0,\n            sourceWidth,\n            sourceHeight,\n            0,\n            0,\n            sourceWidth,\n            sourceHeight\n          )\n        }\n      }\n      canvas.width = destWidth\n      canvas.height = destHeight\n      loadImage.transformCoordinates(\n        canvas,\n        options\n      )\n      return loadImage.renderImageToCanvas(\n        canvas,\n        img,\n        sourceX,\n        sourceY,\n        sourceWidth,\n        sourceHeight,\n        0,\n        0,\n        destWidth,\n        destHeight\n      )\n    }\n    img.width = destWidth\n    img.height = destHeight\n    return img\n  }\n\n  loadImage.createObjectURL = function (file) {\n    return urlAPI ? urlAPI.createObjectURL(file) : false\n  }\n\n  loadImage.revokeObjectURL = function (url) {\n    return urlAPI ? urlAPI.revokeObjectURL(url) : false\n  }\n\n  // Loads a given File object via FileReader interface,\n  // invokes the callback with the event object (load or error).\n  // The result can be read via event.target.result:\n  loadImage.readFile = function (file, callback, method) {\n    if (window.FileReader) {\n      var fileReader = new FileReader()\n      fileReader.onload = fileReader.onerror = callback\n      method = method || 'readAsDataURL'\n      if (fileReader[method]) {\n        fileReader[method](file)\n        return fileReader\n      }\n    }\n    return false\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(function () {\n      return loadImage\n    })\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = loadImage\n  } else {\n    $.loadImage = loadImage\n  }\n}(window))\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/blueimp-load-image/js/load-image.js\n// module id = 465\n// module chunks = 0 1 2","import { Media, MediaObject } from '@ionic-native/media';\nimport * as Bluebird from \"bluebird\"\n\nexport type recordingType = {\n\tpath: string,\n\trecording: MediaObject,\n\tduration: number\n}\n\nexport type recordingsType = recordingType[]\n\nconst media = new Media()\n\nexport default class VoicemailPlayer {\n\n\tprivate static activePlayer: VoicemailPlayer = null\n\tprivate playing = false\n\tprivate recordings: recordingsType = []\n\n\tprivate recordPlayingIndex = 0\n\tprivate position = 0\n\tprivate interval : number = null\n\tprivate loadingPromises : Bluebird<any>[] = []\n\n\tconstructor(recordings: recordingsType) {\n\t\tthis.recordings = recordings\n\t}\n\n\tplay() {\n\t\tthis.awaitLoading().then(() => {\n\t\t\tif (VoicemailPlayer.activePlayer) {\n\t\t\t\tVoicemailPlayer.activePlayer.reset()\n\t\t\t}\n\t\t\tthis.recordings[this.recordPlayingIndex].recording.play()\n\t\t\tVoicemailPlayer.activePlayer = this\n\t\t\tthis.playing = true\n\n\t\t\tclearInterval(this.interval)\n\t\t\tthis.interval = window.setInterval(() => {\n\t\t\t\tconst indexAtInvocation = this.recordPlayingIndex\n\t\t\t\tthis.recordings[this.recordPlayingIndex].recording.getCurrentPosition().then((pos: number) => {\n\t\t\t\t\tif (indexAtInvocation === this.recordPlayingIndex && this.interval !== null && pos !== -1) {\n\t\t\t\t\t\tthis.position = pos\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}, 100)\n\n\t\t})\n\t}\n\n\tpause() {\n\t\tthis.recordings[this.recordPlayingIndex].recording.pause()\n\t\tVoicemailPlayer.activePlayer = null\n\t\tthis.playing = false\n\t}\n\n\ttoggle() {\n\t\tif (this.playing) {\n\t\t\tthis.pause()\n\t\t} else {\n\t\t\tthis.play()\n\t\t}\n\t}\n\n\tisPlaying() {\n\t\treturn this.playing\n\t}\n\n\tisPaused() {\n\t\treturn !this.playing\n\t}\n\n\tgetDuration(beforeIndex?: number) {\n\t\treturn this.recordings.slice(0, beforeIndex).reduce((prev, next) => prev + next.duration, 0)\n\t}\n\n\tgetPosition() {\n\t\tconst currentDuration = this.getDuration(this.recordPlayingIndex)\n\t\treturn currentDuration + this.position\n\t}\n\n\treset() {\n\t\tclearInterval(this.interval)\n\n\t\tthis.recordings.forEach(({ recording }) => recording.stop())\n\t\tthis.recordPlayingIndex = 0\n\t\tthis.position = 0\n\t\tthis.interval = null\n\n\t\tif (VoicemailPlayer.activePlayer && this !== VoicemailPlayer.activePlayer) {\n\t\t\tVoicemailPlayer.activePlayer.reset()\n\t\t}\n\t\tVoicemailPlayer.activePlayer = null\n\t\tthis.playing = false\n\t}\n\n\tawaitLoading = () => {\n\t\treturn Bluebird.all(this.loadingPromises)\n\t}\n\n\taddRecording(path: string, estimatedDuration: number) {\n\t\tconst isIOS = window.device.platform === \"iOS\"\n\n\t\tconst currentRecording = media.create(isIOS ? path.replace(/^file:\\/\\//, '') : path)\n\n\t\tcurrentRecording.play()\n\n\t\tconst recordingInfo = {\n\t\t\tpath,\n\t\t\trecording: currentRecording,\n\t\t\tduration: estimatedDuration\n\t\t}\n\n\t\tconst loadingPromise = new Bluebird((resolve) => {\n\t\t\tconst subscription = currentRecording.onStatusUpdate.subscribe((s) => {\n\t\t\t\tif (s === media.MEDIA_RUNNING) {\n\t\t\t\t\tcurrentRecording.stop()\n\t\t\t\t}\n\n\t\t\t\tif (s === media.MEDIA_STOPPED) {\n\t\t\t\t\tsubscription.unsubscribe()\n\t\t\t\t\tresolve()\n\t\t\t\t}\n\t\t\t})\n\t\t}).then(() => {\n\t\t\trecordingInfo.duration = currentRecording.getDuration()\n\n\t\t\tcurrentRecording.onStatusUpdate.subscribe(this.statusListener)\n\t\t})\n\n\t\tthis.loadingPromises.push(loadingPromise)\n\n\t\tthis.recordings.push(recordingInfo)\n\t}\n\n\tdestroy() {\n\t\tthis.recordings.forEach(({ recording, path }) => {\n\t\t\trecording.release()\n\n\t\t\t// TODO delete file created!\n\t\t\tconsole.warn(\"TODO: delete file:\", path)\n\t\t})\n\t}\n\n\tgetRecordings() {\n\t\treturn [...this.recordings]\n\t}\n\n\tprivate statusListener = (status) => {\n\t\tif (status === media.MEDIA_STOPPED && this.isPlaying()) {\n\t\t\t// Use a Promise to trigger the angular zone. Zones are bad. Angular DI is bad.\n\t\t\tBluebird.resolve().then(() => {\n\t\t\t\tthis.recordPlayingIndex += 1\n\t\t\t\tthis.position = 0\n\n\t\t\t\tif (this.recordPlayingIndex >= this.recordings.length) {\n\t\t\t\t\tthis.reset()\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.recordings[this.recordPlayingIndex].recording.play()\n\t\t\t})\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/asset/voicemailPlayer.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from 'ionic-angular';\n\nimport { SeperatorDatePipe } from \"../../lib/pipes/seperatorDate\";\n\nimport { TopicComponent } from \"./topicDisplay\"\nimport { BurstDifferenceComponent } from \"./burstDifference\"\nimport { MessageComponent } from \"./message\"\n\nimport { SyntaxifyDirective } from \"../syntaxify\"\n\nimport { GalleryComponent } from \"../gallery/gallery\"\n\nimport { ComponentsModule } from \"../components.module\"\n\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n\tdeclarations: [\n\t\tSeperatorDatePipe,\n\t\tTopicComponent,\n\t\tBurstDifferenceComponent,\n\t\tSyntaxifyDirective,\n\t\tGalleryComponent,\n\t\tMessageComponent,\n\t],\n\timports: [\n\t\tComponentsModule,\n\t\tIonicModule,\n\t\tCommonModule,\n\t\tTranslateModule.forChild(),\n\t],\n\texports: [\n\t\tSeperatorDatePipe,\n\t\tTopicComponent,\n\t\tBurstDifferenceComponent,\n\t\tSyntaxifyDirective,\n\t\tGalleryComponent,\n\t\tMessageComponent,\n\n\t\tCommonModule,\n\t]\n})\nexport class TopicComponentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/topic/topicComponentsModule.ts","import { Pipe } from \"@angular/core\";\nimport moment from 'moment';\nimport { TranslateService } from '@ngx-translate/core';\n\nconst translateKeys = [\"today\", \"yesterday\"]\n\n@Pipe({\n\tname: \"seperatorDate\"\n})\nexport class SeperatorDatePipe {\n\n\tconstructor(private translate: TranslateService) {}\n\n\ttransform(value: any): string {\n\t\tif(!value) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif(typeof value === \"number\") {\n\t\t\tvalue = new Date(value);\n\t\t}\n\n\t\tconst momentValue = moment(value)\n\n\t\tconst formatted = momentValue.format(\"Do MMMM YYYY\")\n\n\t\tconst dayDiff = moment().diff(momentValue, \"days\")\n\n\t\tif (dayDiff > 1) {\n\t\t\treturn `${formatted}`\n\t\t}\n\n\t\tconst dayDiffString = this.translate.instant(`time.${translateKeys[dayDiff]}`);\n\n\t\treturn `${dayDiffString}, ${formatted}`\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pipes/seperatorDate.ts","import { Component, ViewChild, Input, Output, EventEmitter, ElementRef, SimpleChanges } from \"@angular/core\" // tslint:disable-line:no-unused-variable\nimport { Media, MediaObject } from '@ionic-native/media'\nimport { AlertController } from 'ionic-angular'\n\nimport { NavController, ActionSheetController, Platform } from \"ionic-angular\"\n\nimport * as Bluebird from \"bluebird\"\n\nimport { ImagePicker } from '@ionic-native/image-picker'\nimport { File, FileEntry } from '@ionic-native/file'\nimport { Camera, CameraOptions } from '@ionic-native/camera'\n\nimport { TranslateService } from '@ngx-translate/core'\n\nimport ImageUpload from \"../../lib/services/imageUpload.service\"\nimport FileUpload from \"../../lib/services/fileUpload.service\"\n\nimport h from \"../../lib/helper/helper\"\nimport { TypeState } from \"typestate\"\n\nimport uuidv4 from 'uuid/v4'\n\nimport VoicemailPlayer, { recordingType } from \"../../lib/asset/voicemailPlayer\"\n\nimport { unpath } from \"../../lib/services/blobService\"\nimport Burst from \"../../lib/messages/burst\"\nimport featureToggles from \"../../lib/services/featureToggles\"\n\nimport { isBusinessVersion } from \"../../lib/services/location.manager\";\n\nenum RecordingStates {\n\tNotRecording,\n\tRecording,\n\tPaused\n}\n\nvar RecordingStateMachine = new TypeState.FiniteStateMachine<RecordingStates>(RecordingStates.NotRecording)\n\nRecordingStateMachine.fromAny(RecordingStates).to(RecordingStates.Recording)\nRecordingStateMachine.fromAny(RecordingStates).to(RecordingStates.NotRecording)\n\nRecordingStateMachine.from(RecordingStates.Recording).to(RecordingStates.Paused)\n\nconst ImagePickerOptions = {\n\twidth: 2560,\n\theight: 1440,\n\tmaximumImagesCount: 6\n}\n\nconst INFINITE_SCROLLING_THRESHOLD = 1000\n\nconst MAXIMUM_FILE_SIZE_MB = isBusinessVersion() ? 15 : 10\n\nconst isIOS = () => window.device && window.device.platform === 'iOS'\n\nconst selectFileIOS = () =>\n\tnew Bluebird<string>((resolve, reject) => window.FilePicker.pickFile(resolve, reject, \"public.item\"))\n\t\t.then((url) => `file://${url}`)\n\nconst selectFileAndroid = () =>\n\tnew Bluebird<string>((resolve, reject) => window.fileChooser.open(resolve, reject))\n\t\t.then((url) => `file://${url}`)\n\nconst selectFile = () => isIOS() ? selectFileIOS() : selectFileAndroid()\n\nconst FILE = new File()\n\n@Component({\n\tselector: \"topicWithBursts\",\n\ttemplateUrl: \"topic.html\"\n})\nexport class TopicComponent {\n\t@Input() partners\n\t@Input() chat\n\t@Input() messageBurstsFunction\n\t@Input() loadMoreMessages\n\t@Input() messagesLoading\n\n\t@Output() sendMessage = new EventEmitter()\n\n\t@ViewChild('content') content: ElementRef\n\t@ViewChild('footer') footer: ElementRef\n\n\trecordingPlayer: VoicemailPlayer\n\n\tprivate recordingFile: MediaObject\n\n\tfirstRender: Boolean = true\n\tnewMessageText = \"\"\n\tmoreMessagesAvailable = true\n\tinViewMessages: any[] = []\n\toldScrollFromBottom: number = 0\n\tinputFocus: boolean = false\n\n\tcameraOptions: CameraOptions\n\n\tmutationObserver: MutationObserver\n\n\tbursts: Burst[]\n\n\tprivate recordingInfo = {\n\t\tUUID: \"\",\n\t\tduration: 0,\n\t\tstartTime: 0,\n\t\tupdateInterval: 0\n\t}\n\n\tconstructor(\n\t\tpublic navCtrl: NavController,\n\t\tprivate actionSheetCtrl: ActionSheetController,\n\t\tprivate platform: Platform,\n\t\tprivate imagePicker: ImagePicker,\n\t\tprivate camera: Camera,\n\t\tprivate translate: TranslateService,\n\t\tprivate media: Media,\n\t\tprivate alertController: AlertController\n\t) {\n\t\tthis.cameraOptions = {\n\t\t\tquality: 50,\n\t\t\tdestinationType: this.camera.DestinationType.FILE_URI,\n\t\t\tsourceType: this.camera.PictureSourceType.CAMERA,\n\t\t\tencodingType: this.camera.EncodingType.JPEG,\n\t\t\tmediaType: this.camera.MediaType.PICTURE,\n\t\t\tallowEdit: !this.platform.is('ios'),\n\t\t\tcorrectOrientation: true\n\t\t}\n\n\t\tthis.recordingPlayer = new VoicemailPlayer([])\n\n\t\tRecordingStateMachine.on(RecordingStates.NotRecording, () => {\n\t\t\tif (!this.recordingFile) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.recordingFile.release()\n\t\t\tthis.recordingFile = null\n\t\t})\n\n\t\tRecordingStateMachine.onExit(RecordingStates.Paused, (to) => {\n\t\t\tthis.recordingPlayer.reset()\n\t\t\treturn true\n\t\t})\n\t}\n\n\tngAfterViewInit() {\n\t\twindow.addEventListener('resize', this.keyboardChange)\n\t\tthis.content.nativeElement.addEventListener('scroll', this.onScroll)\n\n\t\tthis.mutationObserver = new MutationObserver(this.mutationListener)\n\t\tthis.mutationObserver.observe(this.content.nativeElement, { childList: true, subtree: true })\n\t}\n\n\tngOnDestroy() {\n\t\twindow.removeEventListener('resize', this.keyboardChange)\n\t\tthis.content.nativeElement.removeEventListener('scroll', this.onScroll)\n\n\t\tthis.mutationObserver.disconnect()\n\t}\n\n\tmutationListener = (mutations) => {\n\t\tconst id = this.getFirstInViewMessageId()\n\n\t\tif (!id || this.oldScrollFromBottom < 15) {\n\t\t\treturn this.stabilizeScroll()\n\t\t}\n\n\t\tconst firstElement = document.querySelector(`[data-messageid=\"${id}\"]`)\n\n\t\tconst updateScroll = mutations.some((mutation) => {\n\t\t\treturn [].slice.call(mutation.addedNodes).some((element) => {\n\t\t\t\tconst position = firstElement.compareDocumentPosition(element)\n\n\t\t\t\treturn position & 0x02\n\t\t\t})\n\t\t})\n\n\t\tif (updateScroll) {\n\t\t\treturn this.stabilizeScroll()\n\t\t}\n\n\t\tconsole.warn(\"Only elements below newest messages have changed not updating viewport\")\n\t}\n\n\tkeyboardChange = () => {\n\t\tthis.stabilizeScroll()\n\t}\n\n\tprivate sendVoicemail = () => {\n\t\tconst voicemails = this.recordingPlayer.getRecordings()\n\n\t\tthis.recordingPlayer.awaitLoading().thenReturn(voicemails).map(({ path, recording, duration }:recordingType) => {\n\t\t\tconst { directory, name } = unpath(path)\n\n\t\t\treturn FILE.moveFile(\n\t\t\t\tthis.platform.is(\"ios\") ? \"file://\" + directory : directory,\n\t\t\t\tname,\n\t\t\t\tFILE.cacheDirectory,\n\t\t\t\tname\n\t\t\t).then(() => ({\n\t\t\t\tpath: `${FILE.cacheDirectory}${name}`,\n\t\t\t\tduration, recording\n\t\t\t}))\n\t\t}).map((voicemail:recordingType) => {\n\t\t\tconst { path, duration } = voicemail\n\n\t\t\treturn this.getFile(path).then((fileObject) =>\n\t\t\t\tnew FileUpload(fileObject, { encrypt: true, extraInfo: { duration } })\n\t\t\t)\n\t\t}).then((voicemails) => {\n\t\t\tthis.sendMessage.emit({\n\t\t\t\ttext: \"\",\n\t\t\t\tvoicemails,\n\t\t\t})\n\t\t}).catch((e) => {\n\t\t\tconsole.error(\"Sending voicemail failed\", e)\n\t\t\t// TODO\n\t\t})\n\n\t\tthis.resetRecordingState()\n\t}\n\n\tsendMessageToChat = () => {\n\t\tif (this.isRecordingUIVisible()) {\n\t\t\tif (this.isRecording()) {\n\t\t\t\tthis.toggleRecording()\n\t\t\t}\n\n\t\t\tthis.sendVoicemail()\n\n\t\t\treturn\n\t\t}\n\n\t\tthis.sendMessage.emit({\n\t\t\ttext: this.newMessageText\n\t\t})\n\n\t\tthis.newMessageText = \"\"\n\n\t\tdocument.querySelector(\"textarea\").focus()\n\n\t\tthis.change()\n\t}\n\n\tshowRecordIcon() {\n\t\tif (!featureToggles.isFeatureEnabled(\"chat.voiceMail\")) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn this.newMessageText.length === 0\n\t}\n\n\tshowFileTooBigWarning() {\n\t\tconst alert = this.alertController.create({\n\t\t\ttitle: this.translate.instant(\"topic.fileTooBigTitle\"),\n\t\t  subTitle: this.translate.instant(\"topic.fileTooBigDetail\", { max_size: MAXIMUM_FILE_SIZE_MB }),\n\t\t  buttons: ['OK']\n\t\t})\n\t\talert.present()\n\t}\n\n\tgetFile = (url: string, type?: string) : Bluebird<any> => {\n\t\treturn Bluebird.resolve(FILE.resolveLocalFilesystemUrl(url))\n\t\t\t.then((file: FileEntry) => new Bluebird((resolve, reject) => file.file(resolve, reject)))\n\t\t\t.then((file: any) => {\n\t\t\t\tfile.originalUrl = url\n\t\t\t\tif(this.platform.is(\"ios\")) {\n\t\t\t\t\tfile.localURL = url.replace(\"file://\", `http://${window.location.host}`)\n\t\t\t\t}\n\t\t\t\tif (file.size > MAXIMUM_FILE_SIZE_MB * 1000 * 1000) {\n\t\t\t\t\tthis.showFileTooBigWarning()\n\t\t\t\t\tthrow new Error(\"File too big, not sending.\")\n\t\t\t\t}\n\t\t\t\tif (type) {\n\t\t\t\t\tfile.type = type\n\t\t\t\t}\n\n\t\t\t\treturn file\n\t\t\t})\n\t}\n\n\ttakeImage = () => {\n\t\tthis.camera.getPicture(this.cameraOptions).then((url: any) => {\n\t\t\treturn this.getFile(url, \"image/png\")\n\t\t}).then((file: any) => {\n\t\t\treturn new ImageUpload(file)\n\t\t}).then((image) => {\n\t\t\tthis.sendMessage.emit({\n\t\t\t\timages: [image],\n\t\t\t\ttext: \"\"\n\t\t\t})\n\t\t})\n\t}\n\n\ttoggleInputFocus = () =>\n\t\tthis.inputFocus = !this.inputFocus\n\n\tshowCameraShortcut = () =>\n\t\t!this.inputFocus && this.newMessageText.length === 0\n\n\tisRecordingUIVisible = () =>\n\t\t!RecordingStateMachine.is(RecordingStates.NotRecording)\n\n\tisPlayback = () =>\n\t\tRecordingStateMachine.is(RecordingStates.Paused) && this.recordingPlayer.isPlaying()\n\n\tisRecording = () =>\n\t\tRecordingStateMachine.is(RecordingStates.Recording)\n\n\tisPaused = () =>\n\t\tRecordingStateMachine.is(RecordingStates.Paused)\n\n\tgetRecordingDir = () => {\n\t\tif (!this.platform.is(\"ios\")) {\n\t\t\treturn FILE.externalRootDirectory\n\t\t}\n\n\t\treturn FILE.tempDirectory.replace(/^file:\\/\\//, '')\n\t}\n\n\tgetRecordingFileName = () => {\n\t\tconst recordingID = this.recordingPlayer.getRecordings().length\n\t\tconst extension = this.platform.is(\"ios\") ? \"m4a\" : \"aac\"\n\t\tconst dir = this.getRecordingDir()\n\n\t\treturn `${dir}recording_${this.recordingInfo.UUID}_${recordingID}.${extension}`\n\t}\n\n\tprivate startRecording() {\n\t\tif (this.recordingFile) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.recordingInfo.UUID) {\n\t\t\tthis.recordingInfo.UUID = uuidv4()\n\t\t}\n\n\t\tthis.recordingFile = this.media.create(this.getRecordingFileName())\n\t\tthis.recordingInfo.startTime = Date.now()\n\t\tthis.recordingFile.startRecord()\n\n\t\tclearInterval(this.recordingInfo.updateInterval)\n\t\tthis.recordingInfo.updateInterval = window.setInterval(() => {\n\t\t\tthis.recordingInfo.duration = (Date.now() - this.recordingInfo.startTime) / 1000\n\t\t}, 100)\n\t}\n\n\tformatTime = (seconds) => {\n\t\tconst fullSeconds = h.pad(Math.floor(seconds % 60), 2)\n\t\tconst minutes = h.pad(Math.floor(seconds / 60), 2)\n\n\t\treturn `${minutes}:${fullSeconds}`\n\t}\n\n\tgetCurrentDuration = (beforeIndex?: number) => {\n\t\tif (beforeIndex) {\n\t\t\treturn 0\n\t\t}\n\n\t\tif (!RecordingStateMachine.is(RecordingStates.Recording)) {\n\t\t\treturn 0\n\t\t}\n\n\t\treturn this.recordingInfo.duration\n\t}\n\n\tgetDuration = (beforeIndex?: number) => {\n\t\treturn this.recordingPlayer.getDuration() + this.getCurrentDuration()\n\t}\n\n\ttoggleRecording = () => {\n\t\tif (RecordingStateMachine.is(RecordingStates.Recording)) {\n\t\t\tRecordingStateMachine.go(RecordingStates.Paused)\n\t\t\tclearInterval(this.recordingInfo.updateInterval)\n\n\t\t\tthis.recordingFile.stopRecord()\n\t\t\tthis.recordingFile.release()\n\t\t\tthis.recordingFile = null\n\n\t\t\tthis.recordingPlayer.addRecording(this.getRecordingFileName(), this.recordingInfo.duration)\n\t\t\tthis.recordingInfo.duration = 0\n\t\t} else {\n\t\t\tRecordingStateMachine.go(RecordingStates.Recording)\n\t\t\tthis.startRecording()\n\t\t}\n\t}\n\n\tresetRecordingState = () => {\n\t\tif (this.recordingFile) {\n\t\t\tthis.recordingFile.release()\n\t\t\tthis.recordingFile = null\n\t\t}\n\n\t\tclearInterval(this.recordingInfo.updateInterval)\n\n\t\tthis.recordingPlayer.reset()\n\t\tthis.recordingPlayer = new VoicemailPlayer([])\n\n\t\tRecordingStateMachine.go(RecordingStates.NotRecording)\n\t}\n\n\tdiscardRecording = () => {\n\t\tthis.recordingPlayer.destroy()\n\t\tthis.resetRecordingState()\n\t}\n\n\tgetPosition = () => {\n\t\treturn this.recordingPlayer.getPosition()\n\t}\n\n\ttogglePlayback = () => {\n\t\tthis.recordingPlayer.toggle()\n\t}\n\n\tpresentActionSheet = () => {\n\t\tconst cameraButton = {\n\t\t\ttext: this.translate.instant(\"topic.takePhoto\"),\n\t\t\ticon: !this.platform.is(\"ios\") ? \"camera\": null,\n\t\t\thandler: () => {\n\t\t\t\tthis.takeImage()\n\t\t\t}\n\t\t}\n\n\t\tconst galleryButton = {\n\t\t\ttext: this.translate.instant(\"topic.selectGallery\"),\n\t\t\ticon: !this.platform.is(\"ios\") ? \"image\": null,\n\t\t\thandler: () => {\n\t\t\t\tBluebird.resolve(this.imagePicker.getPictures(ImagePickerOptions)).map((result: any) => {\n\t\t\t\t\treturn this.getFile(result, \"image/png\")\n\t\t\t\t}).map((file: any) => {\n\t\t\t\t\treturn new ImageUpload(file)\n\t\t\t\t}).then((images) => {\n\t\t\t\t\tthis.sendMessage.emit({\n\t\t\t\t\t\timages,\n\t\t\t\t\t\ttext: \"\"\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tconst fileButton = {\n\t\t\ttext: this.translate.instant(\"topic.selectFile\"),\n\t\t\ticon: !this.platform.is(\"ios\") ? \"document\": null,\n\t\t\thandler: () => {\n\t\t\t\tselectFile()\n\t\t\t\t\t.then(file => this.getFile(file))\n\t\t\t\t\t.then(file => new FileUpload(file, { encrypt: true, extraInfo: {} }))\n\t\t\t\t\t.then(file => {\n\t\t\t\t\t\tthis.sendMessage.emit({\n\t\t\t\t\t\t\tfiles: [file],\n\t\t\t\t\t\t\ttext: \"\"\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tconst cancelButton = {\n\t\t\ttext: this.translate.instant(\"general.cancel\"),\n\t\t\ticon: !this.platform.is(\"ios\") ? \"close\" : null,\n\t\t\trole: \"cancel\"\n\t\t}\n\n\t\tconst buttons = featureToggles.isFeatureEnabled(\"chat.fileTransfer\") ?\n\t\t\t[ cameraButton, galleryButton, fileButton, cancelButton ] :\n\t\t\t[ cameraButton, galleryButton, cancelButton ]\n\n\t\tlet actionSheet = this.actionSheetCtrl.create({\n\t\t\tbuttons\n\t\t})\n\n\t\tactionSheet.present()\n\t}\n\n\trealScrollHeight(element) {\n\t\treturn element.scrollHeight - element.clientHeight\n\t}\n\n\tisInView = (element, headerHeight) => {\n\t\tconst top = element.getBoundingClientRect().top - headerHeight\n\n\t\treturn top > 0 && top < this.content.nativeElement.clientHeight\n\t}\n\n\tupdateElementsInView = h.debounce(() => {\n\t\tconst headerHeight = document.querySelector(\".header\").clientHeight\n\n\t\tconst messages = Array.prototype.slice.call(\n\t\t\tthis.content.nativeElement.querySelectorAll(\".messages__wrap\")\n\t\t)\n\n\t\tthis.inViewMessages = messages.filter((e) => this.isInView(e, headerHeight))\n\t}, 20)\n\n\tcheckLoadMoreMessages() {\n\t\tif (this.messagesLoading || !this.moreMessagesAvailable || !this.loadMoreMessages) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { scrollTop } = this.content.nativeElement\n\n\t\tif (scrollTop < INFINITE_SCROLLING_THRESHOLD) {\n\t\t\tthis.messagesLoading = true\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.loadMoreMessages().then((remaining) => {\n\t\t\t\t\tthis.moreMessagesAvailable = remaining !== 0\n\t\t\t\t\tthis.messagesLoading = false\n\t\t\t\t})\n\t\t\t}, 0)\n\t\t}\n\t}\n\n\tonScroll = () => {\n\t\tthis.oldScrollFromBottom = this.scrollFromBottom()\n\n\t\tthis.updateElementsInView()\n\t\tthis.checkLoadMoreMessages()\n\t}\n\n\tscrollFromBottom = () => {\n\t\tconst element = this.content.nativeElement\n\t\treturn this.realScrollHeight(element) - element.scrollTop\n\t}\n\n\tstabilizeScrollIfHeightChanged = (height, scrollFromBottom) => {\n\t\tconst element = this.content.nativeElement\n\n\t\tconst newHeight = this.realScrollHeight(element)\n\n\t\tif (newHeight !== height) {\n\t\t\tconsole.warn(`Height changed from ${height} to ${newHeight}`)\n\n\t\t\tthis.oldScrollFromBottom = scrollFromBottom\n\t\t\tthis.stabilizeScroll()\n\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tcheckHeightChange = (height, scrollFromBottom, maximumTime) => {\n\t\tconst delayTime = 25\n\n\t\tBluebird.delay(delayTime).then(() => {\n\t\t\tif (!this.stabilizeScrollIfHeightChanged(height, scrollFromBottom) && maximumTime > 0) {\n\t\t\t\tthis.checkHeightChange(height, scrollFromBottom, maximumTime - delayTime)\n\t\t\t}\n\t\t})\n\t}\n\n\tstabilizeScroll = () => {\n\t\tconst element = this.content.nativeElement\n\n\t\tconst height = this.realScrollHeight(element)\n\t\tconst newScrollTop = height - this.oldScrollFromBottom\n\n\t\telement.scrollTop = newScrollTop\n\n\t\tthis.checkHeightChange(height, this.oldScrollFromBottom, this.platform.is('ios') ? 300 : 50)\n\t}\n\n\tgetFirstInViewMessageId = () => {\n\t\tconst firstInViewMessage = this.inViewMessages[0]\n\n\t\tif (firstInViewMessage) {\n\t\t\treturn firstInViewMessage.getAttribute(\"data-messageid\")\n\t\t}\n\t}\n\n\tafterViewBurstMessages() {\n\t\tconst id = this.getFirstInViewMessageId()\n\n\t\tif (!id) {\n\t\t\treturn { changed: false, bursts: [] }\n\t\t}\n\n\t\tconst { changed, bursts } = this.messageBurstsFunction({\n\t\t\tafter: id\n\t\t})\n\n\t\treturn { changed, bursts }\n\t}\n\n\tallBurstMessages() {\n\t\tconst { bursts } = this.messageBurstsFunction()\n\n\t\treturn bursts\n\t}\n\n\tmessageBursts = () => {\n\t\tconst { changed, bursts } = this.afterViewBurstMessages()\n\n\t\tif (changed) {\n\t\t\tconst scrollFromBottom = this.scrollFromBottom()\n\n\t\t\tif (scrollFromBottom > 15) {\n\t\t\t\tthis.bursts = bursts\n\t\t\t\treturn bursts\n\t\t\t}\n\t\t}\n\n\t\tthis.firstRender = false\n\n\t\tthis.bursts = this.allBurstMessages()\n\n\t\treturn this.bursts\n\t}\n\n\tisPreviousMissing(burst: Burst) {\n\t\tconst message = burst.getItems()[0]\n\n\t\tif (this.bursts[0] === burst || !message.getPreviousID()) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn this.bursts.findIndex((burst) =>\n\t\t\tburst.getItems().findIndex((m) =>\n\t\t\t\tm.getClientID() === message.getPreviousID()\n\t\t\t) > -1\n\t\t) === -1\n\t}\n\n\tngOnChanges(changes: SimpleChanges) {\n\t\tconst chatChanges = changes[\"chat\"]\n\n\t\tif (!chatChanges || !chatChanges.currentValue || this.newMessageText !== \"\") {\n\t\t\treturn\n\t\t}\n\n\t\tthis.newMessageText = chatChanges.currentValue.newMessage\n\t}\n\n\tchange() {\n\t\tsetTimeout(() => {\n\t\t\tif (this.chat) {\n\t\t\t\tthis.chat.newMessage = this.newMessageText\n\t\t\t}\n\n\t\t\tconst fontSize = 16\n\n\t\t\tconst minSize = 30\n\t\t\tconst maxSize = fontSize*7\n\n\t\t\tconst footerElement = this.footer.nativeElement\n\n\t\t\tconst textarea  = footerElement.getElementsByTagName(\"textarea\")[0]\n\n\t\t\ttextarea.style.minHeight  = \"0\"\n\t\t\ttextarea.style.height     = \"0\"\n\n\t\t\tconst scroll_height = Math.max(minSize, Math.min(textarea.scrollHeight, maxSize))\n\n\t\t\t// apply new style\n\t\t\ttextarea.style.minHeight  = scroll_height + \"px\"\n\t\t\ttextarea.style.height     = scroll_height + \"px\"\n\n\t\t\tthis.stabilizeScroll()\n\t\t}, 100)\n\t}\n\n\tgoToDetails() {\n\t\tif (!this.chat) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.navCtrl.push(\"Chat Details\", {\n\t\t\tchatID: this.chat.id\n\t\t})\n\t}\n\n\tgoToProfile(userId: number) {\n\t\tif (this.chat) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.navCtrl.push(\"Profile\", {\n\t\t\tuserId\n\t\t})\n\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/topic/topicDisplay.ts","\"use strict\";\r\n/*! typestate - v1.0.4 - 2016-09-07\r\n* https://github.com/eonarheim/TypeState\r\n* Copyright (c) 2016 Erik Onarheim; Licensed BSD-2-Clause*/\r\nvar typestate;\r\n(function (typestate) {\r\n    /**\r\n     * Transition grouping to faciliate fluent api\r\n     */\r\n    var Transitions = (function () {\r\n        function Transitions(fsm) {\r\n            this.fsm = fsm;\r\n        }\r\n        /**\r\n         * Specify the end state(s) of a transition function\r\n         */\r\n        Transitions.prototype.to = function () {\r\n            var states = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                states[_i - 0] = arguments[_i];\r\n            }\r\n            this.toStates = states;\r\n            this.fsm.addTransitions(this);\r\n        };\r\n        /**\r\n         * Specify that any state in the state enum is value\r\n         * Takes the state enum as an argument\r\n         */\r\n        Transitions.prototype.toAny = function (states) {\r\n            var toStates = [];\r\n            for (var s in states) {\r\n                if (states.hasOwnProperty(s)) {\r\n                    toStates.push(states[s]);\r\n                }\r\n            }\r\n            this.toStates = toStates;\r\n            this.fsm.addTransitions(this);\r\n        };\r\n        return Transitions;\r\n    }());\r\n    typestate.Transitions = Transitions;\r\n    /**\r\n     * Internal representation of a transition function\r\n     */\r\n    var TransitionFunction = (function () {\r\n        function TransitionFunction(fsm, from, to) {\r\n            this.fsm = fsm;\r\n            this.from = from;\r\n            this.to = to;\r\n        }\r\n        return TransitionFunction;\r\n    }());\r\n    typestate.TransitionFunction = TransitionFunction;\r\n    /**\r\n     * A simple finite state machine implemented in TypeScript, the templated argument is meant to be used\r\n     * with an enumeration.\r\n     */\r\n    var FiniteStateMachine = (function () {\r\n        function FiniteStateMachine(startState) {\r\n            this._transitionFunctions = [];\r\n            this._onCallbacks = {};\r\n            this._exitCallbacks = {};\r\n            this._enterCallbacks = {};\r\n            this._invalidTransitionCallback = null;\r\n            this.currentState = startState;\r\n            this._startState = startState;\r\n        }\r\n        FiniteStateMachine.prototype.addTransitions = function (fcn) {\r\n            var _this = this;\r\n            fcn.fromStates.forEach(function (from) {\r\n                fcn.toStates.forEach(function (to) {\r\n                    // self transitions are invalid and don't add duplicates\r\n                    if (from !== to && !_this._validTransition(from, to)) {\r\n                        _this._transitionFunctions.push(new TransitionFunction(_this, from, to));\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        /**\r\n         * Listen for the transition to this state and fire the associated callback\r\n         */\r\n        FiniteStateMachine.prototype.on = function (state, callback) {\r\n            var key = state.toString();\r\n            if (!this._onCallbacks[key]) {\r\n                this._onCallbacks[key] = [];\r\n            }\r\n            this._onCallbacks[key].push(callback);\r\n            return this;\r\n        };\r\n        /**\r\n         * Listen for the transition to this state and fire the associated callback, returning\r\n         * false in the callback will block the transition to this state.\r\n         */\r\n        FiniteStateMachine.prototype.onEnter = function (state, callback) {\r\n            var key = state.toString();\r\n            if (!this._enterCallbacks[key]) {\r\n                this._enterCallbacks[key] = [];\r\n            }\r\n            this._enterCallbacks[key].push(callback);\r\n            return this;\r\n        };\r\n        /**\r\n         * Listen for the transition to this state and fire the associated callback, returning\r\n         * false in the callback will block the transition from this state.\r\n         */\r\n        FiniteStateMachine.prototype.onExit = function (state, callback) {\r\n            var key = state.toString();\r\n            if (!this._exitCallbacks[key]) {\r\n                this._exitCallbacks[key] = [];\r\n            }\r\n            this._exitCallbacks[key].push(callback);\r\n            return this;\r\n        };\r\n        /**\r\n         * List for an invalid transition and handle the error, returning a falsy value will throw an\r\n         * exception, a truthy one will swallow the exception\r\n         */\r\n        FiniteStateMachine.prototype.onInvalidTransition = function (callback) {\r\n            if (!this._invalidTransitionCallback) {\r\n                this._invalidTransitionCallback = callback;\r\n            }\r\n            return this;\r\n        };\r\n        /**\r\n         * Declares the start state(s) of a transition function, must be followed with a '.to(...endStates)'\r\n         */\r\n        FiniteStateMachine.prototype.from = function () {\r\n            var states = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                states[_i - 0] = arguments[_i];\r\n            }\r\n            var _transition = new Transitions(this);\r\n            _transition.fromStates = states;\r\n            return _transition;\r\n        };\r\n        FiniteStateMachine.prototype.fromAny = function (states) {\r\n            var fromStates = [];\r\n            for (var s in states) {\r\n                if (states.hasOwnProperty(s)) {\r\n                    fromStates.push(states[s]);\r\n                }\r\n            }\r\n            var _transition = new Transitions(this);\r\n            _transition.fromStates = fromStates;\r\n            return _transition;\r\n        };\r\n        FiniteStateMachine.prototype._validTransition = function (from, to) {\r\n            return this._transitionFunctions.some(function (tf) {\r\n                return (tf.from === from && tf.to === to);\r\n            });\r\n        };\r\n        /**\r\n         * Check whether a transition to a new state is valid\r\n         */\r\n        FiniteStateMachine.prototype.canGo = function (state) {\r\n            return this.currentState === state || this._validTransition(this.currentState, state);\r\n        };\r\n        /**\r\n         * Transition to another valid state\r\n         */\r\n        FiniteStateMachine.prototype.go = function (state) {\r\n            if (!this.canGo(state)) {\r\n                if (!this._invalidTransitionCallback || !this._invalidTransitionCallback(this.currentState, state)) {\r\n                    throw new Error('Error no transition function exists from state ' + this.currentState.toString() + ' to ' + state.toString());\r\n                }\r\n            }\r\n            else {\r\n                this._transitionTo(state);\r\n            }\r\n        };\r\n        /**\r\n         * This method is availble for overridding for the sake of extensibility.\r\n         * It is called in the event of a successful transition.\r\n         */\r\n        FiniteStateMachine.prototype.onTransition = function (from, to) {\r\n            // pass, does nothing until overidden\r\n        };\r\n        /**\r\n        * Reset the finite state machine back to the start state, DO NOT USE THIS AS A SHORTCUT for a transition.\r\n        * This is for starting the fsm from the beginning.\r\n        */\r\n        FiniteStateMachine.prototype.reset = function () {\r\n            this.currentState = this._startState;\r\n        };\r\n        /**\r\n         * Whether or not the current state equals the given state\r\n         */\r\n        FiniteStateMachine.prototype.is = function (state) {\r\n            return this.currentState === state;\r\n        };\r\n        FiniteStateMachine.prototype._transitionTo = function (state) {\r\n            var _this = this;\r\n            if (!this._exitCallbacks[this.currentState.toString()]) {\r\n                this._exitCallbacks[this.currentState.toString()] = [];\r\n            }\r\n            if (!this._enterCallbacks[state.toString()]) {\r\n                this._enterCallbacks[state.toString()] = [];\r\n            }\r\n            if (!this._onCallbacks[state.toString()]) {\r\n                this._onCallbacks[state.toString()] = [];\r\n            }\r\n            var canExit = this._exitCallbacks[this.currentState.toString()].reduce(function (accum, next) {\r\n                return accum && next.call(_this, state);\r\n            }, true);\r\n            var canEnter = this._enterCallbacks[state.toString()].reduce(function (accum, next) {\r\n                return accum && next.call(_this, _this.currentState);\r\n            }, true);\r\n            if (canExit && canEnter) {\r\n                var old = this.currentState;\r\n                this.currentState = state;\r\n                this._onCallbacks[this.currentState.toString()].forEach(function (fcn) {\r\n                    fcn.call(_this, old);\r\n                });\r\n                this.onTransition(old, state);\r\n            }\r\n        };\r\n        return FiniteStateMachine;\r\n    }());\r\n    typestate.FiniteStateMachine = FiniteStateMachine;\r\n})(typestate || (typestate = {}));\r\nexports.typestate = typestate;\r\nexports.TypeState = typestate;\r\n// maintain backwards compatibility for people using the pascal cased version\r\nvar TypeState = typestate;\r\n;\r\n// concat to the back of typestate.ts for node to work :/ typescript modules make me sad\r\n//# sourceMappingURL=typestate-node.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/typestate/dist/typestate-node.js\n// module id = 470\n// module chunks = 0 1","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/v4.js\n// module id = 471\n// module chunks = 0 1","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/lib/rng-browser.js\n// module id = 472\n// module chunks = 0 1","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/uuid/lib/bytesToUuid.js\n// module id = 473\n// module chunks = 0 1","import { Component, Input } from \"@angular/core\";\n\nimport h from \"../../lib/helper/helper\";\n\nimport ChunkLoader, { Chunk } from \"../../lib/messages/chatChunk\"\nimport { Chat } from \"../../lib/messages/chat\"\nimport Burst from \"../../lib/messages/burst\"\n\n@Component({\n\tselector: \"BurstDifference\",\n\ttemplateUrl: \"burstDifference.html\"\n})\nexport class BurstDifferenceComponent {\n\t@Input() chat: Chat\n\t@Input() burst: Burst\n\t@Input() previousBurst: Burst\n\t@Input() noDates: boolean\n\n\tconstructor() {}\n\n\tdifferentDay = () => {\n\t\tif (this.noDates || !this.chat || !this.chat.getLatestChunk) {\n\t\t\treturn false\n\t\t}\n\n\t\tif (this.burst && this.previousBurst) {\n\t\t\treturn !this.burst.sameDay(this.previousBurst)\n\t\t}\n\n\t\treturn true\n\t}\n\n\tdifferentChunk = () => {\n\t\tif (!this.chat || !this.chat.getLatestChunk) {\n\t\t\treturn false\n\t\t}\n\n\t\tif (this.burst && this.previousBurst) {\n\t\t\treturn !this.burst.sameChunk(this.previousBurst)\n\t\t}\n\n\t\tif (this.previousBurst) {\n\t\t\treturn this.previousBurst.getChunkID() !== this.chat.getLatestChunk()\n\t\t}\n\n\t\treturn true\n\t}\n\n\tchunksBetweenBursts = () => {\n\t\tif (!this.previousBurst) {\n\t\t\treturn []\n\t\t}\n\n\t\tconst currentChunkID = this.burst ? this.burst.getChunkID() : this.chat.getLatestChunk()\n\n\t\treturn this.getChunksBetween(\n\t\t\tChunkLoader.getLoaded(currentChunkID),\n\t\t\tChunkLoader.getLoaded(this.previousBurst.getChunkID())\n\t\t).reverse()\n\t}\n\n\taddedReceiver = (chunk: Chunk) => {\n\t\tconst currentReceiveers = chunk.getReceivers()\n\t\tconst previousReceiveers = ChunkLoader.getLoaded(chunk.getPredecessorID()).getReceivers()\n\n\t\treturn currentReceiveers.filter((partner) => previousReceiveers.indexOf(partner) === -1)\n\t}\n\n\tremovedReceiver = (chunk: Chunk) => {\n\t\tconst currentReceiveers = chunk.getReceivers()\n\t\tconst previousReceiveers = ChunkLoader.getLoaded(chunk.getPredecessorID()).getReceivers()\n\n\t\treturn previousReceiveers.filter((partner) => currentReceiveers.indexOf(partner) === -1)\n\t}\n\n\tchangedTitle = (chunk: Chunk) => {\n\t\tconst currentTitle = chunk.getTitle()\n\t\tconst previousTitle = ChunkLoader.getLoaded(chunk.getPredecessorID()).getTitle()\n\n\t\tif (currentTitle !== previousTitle) {\n\t\t\treturn currentTitle\n\t\t}\n\t}\n\n\tgetCreator = (chunk: Chunk) => {\n\t\treturn chunk.getReceivers().find((user) => user.id === chunk.getCreator())\n\t}\n\n\tprivate getChunksBetween = (newerChunk: Chunk, olderChunk: Chunk) => {\n\t\tif (newerChunk.getID() === olderChunk.getID()) {\n\t\t\treturn []\n\t\t}\n\n\t\tconst predecessor = ChunkLoader.getLoaded(newerChunk.getPredecessorID())\n\n\t\treturn [newerChunk, ...this.getChunksBetween(predecessor, olderChunk)]\n\t}\n\n\thasPreviousChunk = () => {\n\t\treturn Boolean(this.previousBurst)\n\t}\n\n\treceiver = () => {\n\t\tif (this.burst) {\n\t\t\treturn ChunkLoader.getLoaded(this.burst.getChunkID()).getPartners()\n\t\t}\n\n\t\treturn ChunkLoader.getLoaded(this.chat.getLatestChunk()).getPartners()\n\t}\n\n\tgetTime = () => {\n\t\tif (this.burst) {\n\t\t\treturn this.burst.firstItem().getTime()\n\t\t}\n\n\t\tconst latestChunk = ChunkLoader.getLoaded(this.chat.getLatestChunk())\n\n\t\treturn h.parseDecimal(latestChunk.getTime())\n\t}\n\n\tgetChunk = () => {\n\t\tconst burstChunkID = this.burst ? this.burst.getChunkID() : this.chat.getLatestChunk()\n\n\t\treturn ChunkLoader.getLoaded(burstChunkID)\n\t}\n\n\thasTitleDifference = () => {\n\t\tif (!this.previousBurst) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst burstChunk = this.getChunk()\n\t\tconst previousBurstChunk = ChunkLoader.getLoaded(this.previousBurst.getChunkID())\n\n\t\treturn burstChunk.getTitle() !== previousBurstChunk.getTitle()\n\t}\n\n\tgetTitle = () => this.getChunk().getTitle()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/topic/burstDifference.ts","import { Component, Input } from \"@angular/core\";\nimport * as Bluebird from \"bluebird\"\n\nimport { Message } from \"../../lib/messages/message\"\nimport VoicemailPlayer from \"../../lib/asset/voicemailPlayer\"\n\nimport h from \"../../lib/helper/helper\"\nimport Progress from \"../../lib/asset/Progress\"\nimport blobService from \"../../lib/services/blobService\"\nimport blobCache from \"../../lib/asset/blobCache\"\n\nconst EMOJIS = [\"\", \"\", \"\", \"\", \"\"]\n\nconst FILE_DOWNLOAD_DELAY = 500\n\n@Component({\n\tselector: \"Message\",\n\ttemplateUrl: \"message.html\"\n})\nexport class MessageComponent {\n\n\t_message: Message\n\n\tvoicemailDownloadProgress: Progress\n\n\n\t@Input() set message(_message: Message) {\n\t\tconst voicemails = _message.data.voicemails\n\n\t\tif (voicemails && voicemails.length > 0) {\n\t\t\tthis.voicemailPlayer = new VoicemailPlayer([])\n\t\t}\n\n\t\tthis._message = _message\n\t}\n\n\tget message(): Message {\n\t\treturn this._message\n\t}\n\n\tconstructor() {}\n\n\tadd = (arr, attr) => {\n\t\treturn arr.reduce((prev, next) => prev + next[attr], 0)\n\t}\n\n\tformatSize(size) {\n\t\tconst emoji = EMOJIS[size % EMOJIS.length]\n\t\tif (size < 1000) {\n\t\t\treturn `${size} B`\n\t\t} else if (size < 1000 * 1000) {\n\t\t\treturn `${Math.round(size / 100) / 10} kB`\n\t\t} else if (size < 1000 * 1000 * 1000) {\n\t\t\treturn `${Math.round(size / (100 * 1000)) / 10} MB`\n\t\t} else if (size < 1000 * 1000 * 1000 * 1000) {\n\t\t\treturn `${Math.round(size / (100 * 1000 * 1000)) / 10} GB`\n\t\t} else if (size < 1000 * 1000 * 1000 * 1000 * 1000) {\n\t\t\treturn `${emoji} TB`\n\t\t} else {\n\t\t\treturn `${emoji} PB`\n\t\t}\n\t}\n\n\tprivate voicemailPlayer: VoicemailPlayer\n\n\tvoicemailDuration = () => {\n\t\tif (this.voicemailPlayer.getDuration() > 0) {\n\t\t\treturn this.voicemailPlayer.getDuration()\n\t\t}\n\t\treturn this.message.data.voicemails.reduce((prev, next) => prev + next.duration, 0)\n\t}\n\n\tvoicemailPosition = () => {\n\t\tif (!this.voicemailPlayer) {\n\t\t\treturn 0\n\t\t}\n\n\t\treturn this.voicemailPlayer.getPosition()\n\t}\n\n\tvoicemailProgress = () => {\n\t\tconst { message } = this\n\t\tif(!message.hasBeenSent()) {\n\t\t\treturn message.data.voicemails.reduce((acc, v) => {\n\t\t\t\tif(!v) return acc;\n\n\t\t\t\treturn acc + v.getProgress() / message.data.voicemails.length;\n\t\t\t}, 0);\n\t\t}\n\n\t\tif (!this.voicemailDownloadProgress) {\n\t\t\treturn 0\n\t\t}\n\n\t\treturn this.voicemailDownloadProgress.getProgress()\n\t}\n\n\tvoicemailSize = () =>\n\t\tthis.message.data.voicemails.reduce((prev, next) => prev + next.size, 0)\n\n\tvoicemailLoaded = () =>\n\t\tthis.message.data.voicemails.reduce((prev, next) => prev && next.loaded, true)\n\n\tdownloadFile = (file) => {\n\t\tconst loadProgress = new Progress()\n\n\t\tfile.getProgress = () => loadProgress.getProgress()\n\n\t\tblobService\n\t\t\t.getBlobUrl(file.blobID, loadProgress, file.size)\n\t\t\t.then(url => blobCache.copyBlobToDownloads(file.blobID, file.name))\n\t\t\t.delay(FILE_DOWNLOAD_DELAY)\n\t\t\t.then((url) => {\n\t\t\t\tfile.loaded = true\n\t\t\t\tfile.url = url\n\t\t\t\treturn blobCache.getFileMimeType(url).then(mimeType =>\n\t\t\t\t\tnew Bluebird((success, error) =>\n\t\t\t\t\t\twindow.cordova.plugins.fileOpener2.showOpenWithDialog(url, mimeType || \"\", { success, error })\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t})\n\t\t\t.catch(e =>\n\t\t\t\talert(parseInt(e.status, 10) === 9\n\t\t\t\t\t? `Could not open file. No app found to open file type for ${file.name}`\n\t\t\t\t\t: `Something went wrong trying to load file ${file.name}`)\n\t\t)\n\t}\n\n\tdownloadVoicemail = h.cacheResult<Bluebird<void>>(() => {\n\t\tthis.voicemailDownloadProgress = new Progress()\n\n\t\treturn this.message.downloadVoicemail(this.voicemailDownloadProgress).then((files) =>\n\t\t\tfiles.forEach((file) => {\n\t\t\t\tthis.voicemailPlayer.addRecording(file.url, file.duration)\n\t\t\t})\n\t\t)\n\t})\n\n\tvoicemailPaused = () =>\n\t\tthis.voicemailPlayer.isPaused()\n\n\tvoicemailPlaying = () =>\n\t\tthis.voicemailPlayer.isPlaying()\n\n\tplayVoicemail = () =>\n\t\tthis.downloadVoicemail().then(() =>\n\t\t\tthis.voicemailPlayer.play()\n\t\t)\n\n\tpauseVoicemail = () =>\n\t\tthis.voicemailPlayer.pause()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/topic/message.ts","import { Directive, ElementRef, Input } from '@angular/core'; // tslint:disable-line:no-unused-variable\n// const EmojifyConverter = require(\"emojify\");\n\n/*const emojify = new EmojifyConverter();\nemojify.img_sets.apple.sheet = \"assets/img/sheet_apple_64.png\";\nemojify.use_sheet = true;\nemojify.include_title = true;*/\n\n/*const emojiElementOuter = jQuery(\"<span>\").addClass(\"emoji-outer\").addClass(\"emoji-sizer\");\nconst emojiElementInner = jQuery(\"<span>\").addClass(\"emoji-inner\").css(\"background\", \"url(\" + emojify.img_sets.apple.sheet + \")\");*/\n\nconst ignoreAsLastCharacter = [\"'\", \")\", \"\\\"\", \".\"];\n\ntype syntaxifierType = (elm: HTMLElement, content: string, remainingTextCallback?: Function) => any\n\n@Directive({ selector: '[whispeerSyntaxify]' })\nexport class SyntaxifyDirective {\n\tsyntaxifier: syntaxifierType[] = [];\n\tel: HTMLElement;\n\n\tprivate appendUrl: syntaxifierType = (elm: HTMLElement, url, remainingTextCallback) => {\n\t\tvar i, removeUntil = 0;\n\t\tfor (i = -1; i > -5; i -= 1) {\n\t\t\t//if i:=-1 than i+1 would be 0 and thus the slice would be empty.\n\t\t\tvar lastCharacter = url.slice(i, i + 1 || undefined);\n\t\t\tif (ignoreAsLastCharacter.indexOf(lastCharacter) === -1) {\n\t\t\t\tremoveUntil = i + 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar removedCharacters = \"\";\n\n\t\tif (removeUntil) {\n\t\t\tremovedCharacters = url.slice(removeUntil);\n\t\t\turl = url.slice(0, removeUntil);\n\t\t}\n\n\t\tconst linkElement = document.createElement(\"a\")\n\t\tlinkElement.setAttribute(\"target\", \"_blank\")\n\t\tlinkElement.setAttribute(\"href\", url)\n\t\tlinkElement.textContent = url\n\n\t\telm.appendChild(linkElement);\n\n\t\tif (removeUntil) {\n\t\t\tremainingTextCallback(removedCharacters);\n\t\t}\n\t}\n\n\turlify: syntaxifierType = (elm, text, remainingTextCallback) => {\n\t\t/*\n\t\t/                                   # Start at the beginning of the text\n\t\t(?:ftp|http|https):\\/\\/              # Look for ftp, http, or https\n\t\t(?:                                  # Username:password combinations (optional)\n\t\t\t[\\w\\.\\-\\+]+                        # A username\n\t\t\t:{0,1}                             # an optional colon to separate the username and password\n\t\t\t[\\w\\.\\-\\+]*@                       # A password\n\t\t)?\n\t\t(?:[a-z0-9\\-\\.]+)                    # The domain limiting it to just allowed characters\n\t\t(?::[0-9]+)?                         # Server port number\n\t\t(?:                                  # The path (optional)\n\t\t\t\\/(?:[\\w#!:\"'\\)\\.\\?\\+=&%@!\\-\\/\\(]+)|  # or a forward slash followed by a full path\n\t\t\t\\?(?:[\\w#!:\"'\\)\\.\\?\\+=&%@!\\-\\/\\(]+)  # or a question mark followed by key value pairs\n\t\t)?/\n\t\t*/\n\n\t\tvar urlRegex = /((?:http|https):\\/\\/(?:[\\w\\.\\-\\+]+:{0,1}[\\w\\.\\-\\+]*@)?(?:[a-z0-9\\-\\.]+)(?::[0-9]+)?(?:\\/(?:[\\w#!:\"'\\)\\.,\\?\\+=&%@!\\-\\~\\/\\(]+)|\\?(?:[\\w#!:\"'\\)\\.,\\?\\+=&%@!\\-\\~\\/\\(]+))?)(?!http)/;\n\n\t\tvar urls = text.split(urlRegex);\n\n\t\tvar i;\n\t\tfor (i = 0; i < urls.length; i += 2) {\n\t\t\tremainingTextCallback(urls[i]);\n\t\t\tif (urls[i + 1]) {\n\t\t\t\tthis.appendUrl(elm, urls[i + 1], remainingTextCallback);\n\t\t\t}\n\t\t}\n\t}\n\n\tnewlines: syntaxifierType = (elm, text, remainingTextCallback) => {\n\t\tvar parts = text.split(/\\r\\n|\\n\\r|\\r|\\n|\\w*\\[br\\]\\w*/);\n\n\t\tvar i;\n\t\tfor (i = 0; i < parts.length; i += 1) {\n\t\t\tremainingTextCallback(parts[i])\n\t\t\tif (i !== parts.length - 1) {\n\t\t\t\telm.appendChild(document.createElement(\"br\"))\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateTextNode: syntaxifierType = (elm, text) => {\n\t\telm.appendChild(document.createTextNode(text));\n\t}\n\n\tcallSyntaxifier = (number: number, elm: HTMLElement, text: string) => {\n\t\tthis.syntaxifier[number](elm, text, (text) => {\n\t\t\tthis.callSyntaxifier(number + 1, elm, text);\n\t\t});\n\t}\n\n\t@Input()\n\tset content(content: string) {\n\t\tthis.callSyntaxifier(0, this.el, content);\n\t}\n\n\tconstructor(el: ElementRef) {\n\t\tthis.syntaxifier = [this.urlify, this.newlines, this.createTextNode];\n\t\tthis.el = el.nativeElement\n\t}\n\n\t/* emojifyReplacer = (elm, text: string, remainingTextCallback: Function) => {\n\t\tvar replaced = emojify.replace_colons(emojify.replace_unified(text));\n\t\treplaced = replaced.replace(/<span class=\"emoji-outer emoji-sizer\"><span class=\"emoji-inner\"([^>]*)><\\/span><\\/span>/g, \":emoji:$1:emoji:\");\n\t\tvar splitted = replaced.split(\":emoji:\");\n\n\t\tsplitted.forEach((text) => {\n\t\t\tif (text.indexOf(emojify.img_sets.apple.sheet) === -1) {\n\t\t\t\telm.append(remainingTextCallback(text));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t//;background-position:67.5% 27.5%;background-size:4100%\" title=\"disappointed_relieved\"\n\t\t\tvar positionMatch = text.match(/background-position:([^;^\"]*)/);\n\t\t\tvar sizeMatch = text.match(/background-size:([^;^\"]*)/);\n\t\t\tvar titleMatch = text.match(/title=\"([^\"]*)\"/);\n\n\t\t\tif (!positionMatch || !sizeMatch || !titleMatch) {\n\t\t\t\telm.append(remainingTextCallback(text));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar position = positionMatch[1];\n\t\t\tvar size = sizeMatch[1];\n\t\t\tvar title = titleMatch[1];\n\n\t\t\tif (!position.match(/^[0-9\\.% ]*$/) && !size.match(/^[0-9\\.%]*$/)) {\n\t\t\t\telm.append(remainingTextCallback(text));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telm.append(\n\t\t\t\temojiElementOuter.clone().append(\n\t\t\t\t\temojiElementInner.clone().\n\t\t\t\t\t\tcss(\"background-position\", position).\n\t\t\t\t\t\tcss(\"background-size\", size).attr(\"title\", title)\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\t} */\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/syntaxify.ts","import { Component, Input } from \"@angular/core\"\nimport { DomSanitizer, SafeUrl } from '@angular/platform-browser' // tslint:disable-line:no-unused-variable\n\nimport errorService from \"../../lib/services/error.service\"\nimport blobService from \"../../lib/services/blobService\"\n\nimport * as Bluebird from \"bluebird\"\nimport { PhotoViewer } from '@ionic-native/photo-viewer'\n\ninterface imageInfo {\n\tblobID: string,\n\tloaded: boolean,\n\tloading: boolean,\n\turl: SafeUrl | string,\n\toriginalUrl: string,\n\twidth?: number,\n\theight?: number\n}\n\ninterface imageQualities {\n\thighest: imageInfo,\n\tmiddle: imageInfo,\n\tlowest: imageInfo,\n\tupload: {}\n}\n\n@Component({\n\tselector: \"gallery\",\n\ttemplateUrl: \"gallery.html\"\n})\nexport class GalleryComponent {\n\t_images: imageQualities[]\n\n\t@Input() set images(value: imageQualities[]) {\n\t\tthis._images = value\n\t\tthis.loadPreviews()\n\t}\n\n\tget images(): imageQualities[] {\n\t\treturn this._images\n\t}\n\n\tpreviewChunk: number = 2\n\tpreview: number = this.previewChunk\n\n\tconstructor(private sanitizer:DomSanitizer, private photoViewer: PhotoViewer){}\n\n\tloadImage(data: imageInfo) {\n\t\tconst blobid = data.blobID\n\n\t\tif (data.loaded) {\n\t\t\treturn Bluebird.resolve(data.originalUrl)\n\t\t}\n\n\t\tdata.loading = true\n\n\t\treturn Bluebird.try(() => blobService.getBlobUrl(blobid))\n\t\t\t.then((url) => {\n\t\t\t\tdata.loading = false\n\t\t\t\tdata.loaded = true\n\t\t\t\tdata.url = this.sanitizer.bypassSecurityTrustUrl(\n\t\t\t\t\twindow.device && window.device.platform === 'iOS' ? url.replace('file://', '') : url\n\t\t\t\t)\n\t\t\t\tdata.originalUrl = url\n\n\t\t\t\treturn url\n\t\t\t})\n\t\t\t.catch(errorService.criticalError)\n\t}\n\n\tloadImagePreviews(images: imageQualities[]) {\n\t\timages.forEach((image) => {\n\t\t\tif (image.lowest && typeof image.lowest.url === \"string\" && image.highest && typeof image.highest.url === \"string\") {\n\t\t\t\timage.highest.url = this.sanitizer.bypassSecurityTrustUrl(image.highest.url)\n\t\t\t\timage.lowest.url = this.sanitizer.bypassSecurityTrustUrl(image.lowest.url)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (!image.lowest.url && image.lowest.width && image.lowest.height) {\n\t\t\t\tconst canvas = document.createElement(\"canvas\")\n\n\t\t\t\tcanvas.width = image.lowest.width\n\t\t\t\tcanvas.height = image.lowest.height\n\n\t\t\t\timage.lowest.url = this.sanitizer.bypassSecurityTrustUrl(canvas.toDataURL())\n\t\t\t}\n\n\t\t\tthis.loadImage(image.lowest)\n\t\t})\n\t}\n\n\tisLoading = () => {\n\t\treturn this._images.reduce((prev, image) => prev\n\t\t\t|| image.highest && image.highest.loading\n\t\t\t|| image.middle && image.middle.loading\n\t\t\t|| image.lowest && image.lowest.loading\n\t\t, false)\n\t}\n\n\tgetProgress = () => {\n\t\treturn 0\n\t}\n\n\tdisplayImage = (image) => {\n\t\tif (image.upload) {\n\t\t\tthis.photoViewer.show(image.upload._file.originalUrl)\n\t\t\treturn\n\t\t}\n\n\t\tthis.loadImage(image.highest || image.middle || image.lowest).then((url) => {\n\t\t\tthis.photoViewer.show(url)\n\t\t})\n\t}\n\n\tloadMoreImages() {\n\t\tthis.loadImagePreviews(this.images.slice(this.preview, this.preview + this.previewChunk))\n\t\tthis.preview += this.previewChunk\n\t}\n\n\trunGif() {\n\t\treturn false\n\t}\n\n\tloadPreviews() {\n\t\tthis.loadImagePreviews(this.images.slice(0, this.preview))\n\t}\n\n\tngOnInit() {\n\t\tthis.loadPreviews()\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/gallery/gallery.ts","import { Component } from '@angular/core';\nimport { Platform, NavController, NavParams, IonicPage } from 'ionic-angular'\nimport { TranslateService } from '@ngx-translate/core';\n\nimport messageService from \"../../lib/messages/messageService\"\nimport ChatLoader, { Chat } from \"../../lib/messages/chat\"\nimport ChunkLoader, { Chunk } from \"../../lib/messages/chatChunk\"\nimport { ContactsWithSearch } from '../../lib/contacts/contactsWithSearch'\nimport h from \"../../lib/helper/helper\";\n\nimport userService from \"../../lib/users/userService\"\nconst friendsService = require(\"../../lib/services/friendsService\");\n\nimport * as Bluebird from 'bluebird';\n\n@IonicPage({\n\tname: \"New Message\",\n\tsegment: \"newMessage/:receiverIds\"\n})\n@Component({\n\tselector: 'page-new-message',\n\ttemplateUrl: 'new-message.html'\n})\nexport class NewMessagePage extends ContactsWithSearch {\n\tfriends: any[];\n\tsearchTerm: string = \"\";\n\tselectedUserMap: any = {};\n\tselectedUsers: any[] = [];\n\tios: boolean = false;\n\n\tconstructor(public navCtrl: NavController, public translate: TranslateService, private platform: Platform, public navParams: NavParams) { // tslint:disable-line:no-unused-variable\n\t\t// super(translate)\n\t\tsuper(translate)\n\n\t\tthis.ios = platform.is(\"ios\")\n\t}\n\n\n\taddSelectedUser = (user) => {\n\t\tif (this.selectedUsers.indexOf(user) === -1) {\n\t\t\tthis.selectedUsers.push(user);\n\t\t}\n\n\t\tthis.selectedUserMap[user.id] = true\n\t}\n\n\tremoveSelectedUser = (user) => {\n\t\th.removeArray(this.selectedUsers, user);\n\n\t\tdelete this.selectedUserMap[user.id]\n\t}\n\n\tupdateSelectedUsers = (user) => {\n\t\tif (this.selectedUserMap[user.id]) {\n\t\t\tthis.removeSelectedUser(user);\n\t\t} else {\n\t\t\tthis.addSelectedUser(user);\n\t\t}\n\t}\n\n\tcreate = () => {\n\t\tthis.send(this.selectedUsers);\n\t}\n\n\tclose = () => {\n\t\tthis.navCtrl.pop();\n\t}\n\n\treceiverString: string;\n\tloading: boolean = true;\n\n\tngOnInit() {\n\t\tthis.receiverString = this.navParams.get(\"receiverIds\");\n\n\t\tif (this.hasReceiverParam()) {\n\t\t\tuserService.getMultipleFormatted(this.getReceiverParam()).then((users) => {\n\t\t\t\tthis.send(users);\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tfriendsService.awaitLoading().then(() => {\n\t\t\tfriendsService.listen(this.loadContactsUsers);\n\t\t\tthis.loadContactsUsers().then(() => {\n\t\t\t\tthis.contactsLoading = false\n\t\t\t});\n\t\t});\n\n\t\tthis.loading = false\n\t}\n\n\tprivate sendToUserTopic(users) {\n\t\tif (users.length > 1) {\n\t\t\treturn Bluebird.resolve();\n\t\t}\n\n\t\treturn messageService.getUserChat(users[0].id);\n\n\t}\n\n\tsend = (users) => {\n\t\tif (users.length === 0) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.loading = true\n\t\tthis.sendToUserTopic(users).then((chatID) => {\n\t\t\tif (chatID) {\n\t\t\t\tthis.goToChat(chatID)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\treturn Chunk.createRawData(users.map(({ id }) => id), { content: {} })\n\t\t}).then((chunkData) => {\n\t\t\tconst chunk = new Chunk({\n\t\t\t\tcontent: {},\n\t\t\t\tserver: {\n\t\t\t\t\tid: -1,\n\t\t\t\t\tchatID: -1,\n\t\t\t\t\tcreateTime: Date.now()\n\t\t\t\t},\n\t\t\t\tmeta: chunkData.chunk.meta,\n\t\t\t\treceiverObjects: users.sort((u1, u2) => u1.id - u2.id)\n\t\t\t}, chunkData)\n\t\t\tconst chat = new Chat({ id: -1, latestMessage: null, latestChunk: chunk, unreadMessageIDs: [] }, true)\n\n\t\t\tChatLoader.addLoaded(-1, chat)\n\t\t\tChunkLoader.addLoaded(-1, chunk)\n\n\t\t\tthis.goToChat(-1)\n\t\t});\n\t}\n\n\thasReceiverParam() {\n\t\tconst type = typeof this.receiverString;\n\n\t\tif (this.receiverString === \":receiverIds\") {\n\t\t\treturn false\n\t\t}\n\n\t\treturn [\"number\", \"string\"].indexOf(type) > -1;\n\t}\n\n\tgetReceiverParam() {\n\t\tif (typeof this.receiverString === \"number\") {\n\t\t\treturn [this.receiverString];\n\t\t}\n\n\t\tif (typeof this.receiverString === \"string\") {\n\t\t\treturn this.receiverString.split(\",\").map((r) => { return parseInt(r, 10) });\n\t\t}\n\n\t\tthrow new Error(\"invalid receiver param\");\n\t}\n\n\tgoToChat = (chatID) => {\n\t\tthis.navCtrl.push(\"Messages\", { chatID }).then(() => {\n\t\t\tthis.navCtrl.remove(this.navCtrl.length() - 2, 1)\n\t\t})\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/new-message/new-message.ts"],"sourceRoot":""}